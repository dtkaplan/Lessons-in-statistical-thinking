<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.549">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Lessons in Statistical Thinking - 2&nbsp; Data graphics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./L03-Variation-and-distribution.html" rel="next">
<link href="./L01-Data-frames.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="site_libs/datatables-binding-0.24/datatables.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="site_libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="site_libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="site_libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/monaco-editor@0.47.0/min/vs/editor/editor.main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  
<style type="text/css">
.monaco-editor pre {
  background-color: unset !important;
}

.qwebr-editor-toolbar {
  width: 100%;
  display: flex;
  justify-content: space-between;
  box-sizing: border-box;
}

.qwebr-editor-toolbar-left-buttons, .qwebr-editor-toolbar-right-buttons {
  display: flex;
}

.qwebr-non-interactive-loading-container.qwebr-cell-needs-evaluation, .qwebr-non-interactive-loading-container.qwebr-cell-evaluated {
  justify-content: center;
  display: flex;
  background-color: rgba(250, 250, 250, 0.65);
  border: 1px solid rgba(233, 236, 239, 0.65);
  border-radius: 0.5rem;
  margin-top: 15px;
  margin-bottom: 15px;
}

.qwebr-r-project-logo {
  color: #2767B0; /* R Project's blue color */
}

.qwebr-icon-status-spinner {
  color: #7894c4;
}

.qwebr-icon-run-code {
  color: #0d9c29
}

.qwebr-output-code-stdout {
  color: #111;
}

.qwebr-output-code-stderr {
  color: #db4133;
}

.qwebr-editor {
  border: 1px solid #EEEEEE;
}

.qwebr-editor-toolbar {
  background-color: #EEEEEE;
  padding: 0.2rem 0.5rem;
}

.qwebr-button {
  background-color: #EEEEEE;
  display: inline-block;
  font-weight: 400;
  line-height: 1;
  text-decoration: none;
  text-align: center;
  color: #000;
  border-color: #dee2e6;
  border: 1px solid rgba(0,0,0,0);
  padding: 0.375rem 0.75rem;
  font-size: .9rem;
  border-radius: 0.25rem;
  transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;
}

.qwebr-button:hover {
  color: #000;
  background-color: #d9dce0;
  border-color: #c8ccd0;
}

.qwebr-button:disabled,.qwebr-button.disabled,fieldset:disabled .qwebr-button {
  pointer-events: none;
  opacity: .65
}

.qwebr-button-reset {
  color: #696969; /*#4682b4;*/
}

.qwebr-button-copy {
  color: #696969;
}


/* Custom styling for RevealJS Presentations*/

/* Reset the style of the interactive area */
.reveal div.qwebr-interactive-area {
  display: block;
  box-shadow: none;
  max-width: 100%;
  max-height: 100%;
  margin: 0;
  padding: 0;
} 

/* Provide space to entries */
.reveal div.qwebr-output-code-area pre div {
  margin: 1px 2px 1px 10px;
}

/* Collapse the inside code tags to avoid extra space between line outputs */
.reveal pre div code.qwebr-output-code-stdout, .reveal pre div code.qwebr-output-code-stderr {
  padding: 0;
  display: contents;
}

.reveal pre div code.qwebr-output-code-stdout {
  color: #111;
}

.reveal pre div code.qwebr-output-code-stderr {
  color: #db4133;
}


/* Create a border around console and output (does not effect graphs) */
.reveal div.qwebr-console-area {
  border: 1px solid #EEEEEE;
  box-shadow: 2px 2px 10px #EEEEEE;
}

/* Cap output height and allow text to scroll */
/* TODO: Is there a better way to fit contents/max it parallel to the monaco editor size? */
.reveal div.qwebr-output-code-area pre {
  max-height: 400px;
  overflow: scroll;
}

</style>
<script type="module">
// Document level settings ----

// Determine if we need to install R packages
globalThis.qwebrInstallRPackagesList = ['ggplot2', 'dplyr', 'LSTbook', 'ggformula', 'mosaicData', 'moderndive', 'palmerpenguins', 'babynames', 'knitr', 'rmarkdown', 'stringdist'];

// Specify possible locations to search for the repository
globalThis.qwebrPackageRepoURLS = ['https://repo.r-wasm.org/'];

// Check to see if we have an empty array, if we do set to skip the installation.
globalThis.qwebrSetupRPackages = !(qwebrInstallRPackagesList.indexOf("") !== -1);
globalThis.qwebrAutoloadRPackages = true;

// Display a startup message?
globalThis.qwebrShowStartupMessage = true;
globalThis.qwebrShowHeaderMessage = false;

// Describe the webR settings that should be used
globalThis.qwebrCustomizedWebROptions = {
  "baseURL": "https://webr.r-wasm.org/v0.3.1/",
  "serviceWorkerUrl": "",
  "homedir": "/home/web_user", 
  "channelType": "ChannelType.Automatic"
};

// Store cell data
globalThis.qwebrCellDetails = [{"options":{"fig-cap":"","results":"markup","output":"true","message":"true","fig-width":7,"read-only":"false","warning":"true","fig-height":5,"label":"unnamed-chunk-1","context":"interactive","editor-max-height":"","dpi":72,"out-width":"700px","autorun":"false","comment":"","out-height":"","classes":""},"id":1,"code":"Anthro_F |> point_plot(Wrist ~ Ankle)"},{"options":{"fig-cap":"","results":"markup","output":"true","message":"true","fig-width":7,"read-only":"false","warning":"true","fig-height":5,"label":"unnamed-chunk-2","context":"interactive","editor-max-height":"","dpi":72,"out-width":"700px","autorun":"false","comment":"","out-height":"","classes":""},"id":2,"code":"Anthro_F |> \n  point_plot(..vert.. ~ ..horiz..)"},{"options":{"fig-cap":"","results":"markup","output":"true","message":"true","fig-width":7,"read-only":"false","warning":"true","fig-height":5,"label":"unnamed-chunk-3","context":"interactive","editor-max-height":"","dpi":72,"out-width":"700px","autorun":"false","comment":"","out-height":"","classes":""},"id":3,"code":"Galton |> point_plot(..tilde.expression..)"},{"options":{"fig-cap":"","results":"markup","output":"true","message":"true","fig-width":7,"read-only":"false","warning":"true","fig-height":5,"label":"unnamed-chunk-4","context":"interactive","editor-max-height":"","dpi":72,"out-width":"700px","autorun":"false","comment":"","out-height":"","classes":""},"id":4,"code":"Births2022 |>\n  point_plot( ..tilde.expression.. )"},{"options":{"fig-cap":"","results":"markup","output":"true","message":"true","fig-width":7,"read-only":"false","warning":"true","fig-height":5,"label":"unnamed-chunk-5","context":"interactive","editor-max-height":"","dpi":72,"out-width":"700px","autorun":"false","comment":"","out-height":"","classes":""},"id":5,"code":"Penguins |> \n  point_plot(\n    mass ~ sex + species + bill_length\n    )"},{"options":{"fig-cap":"","results":"markup","output":"true","message":"true","fig-width":7,"read-only":"false","warning":"true","fig-height":5,"label":"unnamed-chunk-6","context":"interactive","editor-max-height":"","dpi":72,"out-width":"700px","autorun":"false","comment":"","out-height":"","classes":""},"id":6,"code":"Anthro_F |> point_plot(Wrist ~ Ankle)"},{"options":{"fig-cap":"","results":"markup","output":"true","message":"true","fig-width":7,"read-only":"false","warning":"true","fig-height":5,"label":"unnamed-chunk-7","context":"interactive","editor-max-height":"","dpi":72,"out-width":"700px","autorun":"false","comment":"","out-height":"","classes":""},"id":7,"code":"Whickham |>\n  point_plot( .tilde.expression. )"},{"options":{"fig-cap":"","results":"markup","output":"true","message":"true","fig-width":7,"read-only":"false","warning":"true","fig-height":5,"label":"unnamed-chunk-8","context":"interactive","editor-max-height":"","dpi":72,"out-width":"700px","autorun":"false","comment":"","out-height":"","classes":""},"id":8,"code":".data.frame. |> \n  point_plot( .tilde.expression. )"},{"options":{"fig-cap":"","results":"markup","output":"true","message":"true","fig-width":7,"read-only":"false","warning":"true","fig-height":5,"label":"unnamed-chunk-9","context":"interactive","editor-max-height":"","dpi":72,"out-width":"700px","autorun":"false","comment":"","out-height":"","classes":""},"id":9,"code":"Anthro_F |>\n  point_plot( .tilde.expression. )"},{"options":{"fig-cap":"","results":"markup","output":"true","message":"true","fig-width":7,"read-only":"false","warning":"true","fig-height":5,"label":"unnamed-chunk-10","context":"interactive","editor-max-height":"","dpi":72,"out-width":"700px","autorun":"false","comment":"","out-height":"","classes":""},"id":10,"code":"Clock_auction |>\n  point_plot(price ~ bidders + age)"},{"options":{"fig-cap":"","results":"markup","output":"true","message":"true","fig-width":7,"read-only":"false","warning":"true","fig-height":5,"label":"unnamed-chunk-11","context":"interactive","editor-max-height":"","dpi":72,"out-width":"700px","autorun":"false","comment":"","out-height":"","classes":""},"id":11,"code":"Births2022 |> \n  point_plot(weight ~ duration)"},{"options":{"fig-cap":"","results":"markup","output":"true","message":"true","fig-width":7,"read-only":"false","warning":"true","fig-height":5,"label":"unnamed-chunk-12","context":"interactive","editor-max-height":"","dpi":72,"out-width":"700px","autorun":"false","comment":"","out-height":"","classes":""},"id":12,"code":"Births2022 |> count(plurality)"},{"options":{"fig-cap":"","results":"markup","output":"true","message":"true","fig-width":7,"read-only":"false","warning":"true","fig-height":5,"label":"unnamed-chunk-13","context":"interactive","editor-max-height":"","dpi":72,"out-width":"700px","autorun":"false","comment":"","out-height":"","classes":""},"id":13,"code":"Births2022 |> \n  filter(plurality <= 2) |>   # ignore the triplets\n  point_plot(weight ~ duration + plurality,\n  jitter = \"x\", point_ink = 0.5\n  )"}];

</script>
<script type="module">
// Declare startupMessageQWebR globally
globalThis.qwebrStartupMessage = document.createElement("p");


// Function to set the button text
globalThis.qwebrSetInteractiveButtonState = function(buttonText, enableCodeButton = true) {
  document.querySelectorAll(".qwebr-button-run").forEach((btn) => {
    btn.innerHTML = buttonText;
    btn.disabled = !enableCodeButton;
  });
}

// Function to update the status message in non-interactive cells
globalThis.qwebrUpdateStatusMessage = function(message) {
  document.querySelectorAll(".qwebr-status-text.qwebr-cell-needs-evaluation").forEach((elem) => {
    elem.innerText = message;
  });
}

// Function to update the status message
globalThis.qwebrUpdateStatusHeader = function(message) {
  qwebrStartupMessage.innerHTML = `
    <i class="fa-solid fa-spinner fa-spin qwebr-icon-status-spinner"></i>
    <span>${message}</span>`;
}

// Function that attaches the document status message and diagnostics
function displayStartupMessage(showStartupMessage, showHeaderMessage) {
  if (!showStartupMessage) {
    return;
  }

  // Get references to header elements
  const headerHTML = document.getElementById("title-block-header");
  const headerRevealJS = document.getElementById("title-slide");

  // Create the outermost div element for metadata
  const quartoTitleMeta = document.createElement("div");
  quartoTitleMeta.classList.add("quarto-title-meta");

  // Create the first inner div element
  const firstInnerDiv = document.createElement("div");
  firstInnerDiv.setAttribute("id", "qwebr-status-message-area");

  // Create the second inner div element for "WebR Status" heading and contents
  const secondInnerDiv = document.createElement("div");
  secondInnerDiv.setAttribute("id", "qwebr-status-message-title");
  secondInnerDiv.classList.add("quarto-title-meta-heading");
  secondInnerDiv.innerText = "WebR Status";

  // Create another inner div for contents
  const secondInnerDivContents = document.createElement("div");
  secondInnerDivContents.setAttribute("id", "qwebr-status-message-body");
  secondInnerDivContents.classList.add("quarto-title-meta-contents");

  // Describe the WebR state
  qwebrStartupMessage.innerText = "🟡 Loading...";
  qwebrStartupMessage.setAttribute("id", "qwebr-status-message-text");
  // Add `aria-live` to auto-announce the startup status to screen readers
  qwebrStartupMessage.setAttribute("aria-live", "assertive");

  // Append the startup message to the contents
  secondInnerDivContents.appendChild(qwebrStartupMessage);

  // Add a status indicator for COOP and COEP Headers if needed
  if (showHeaderMessage) {
    const crossOriginMessage = document.createElement("p");
    crossOriginMessage.innerText = `${crossOriginIsolated ? '🟢' : '🟡'} COOP & COEP Headers`;
    crossOriginMessage.setAttribute("id", "qwebr-coop-coep-header");
    secondInnerDivContents.appendChild(crossOriginMessage);
  }

  // Combine the inner divs and contents
  firstInnerDiv.appendChild(secondInnerDiv);
  firstInnerDiv.appendChild(secondInnerDivContents);
  quartoTitleMeta.appendChild(firstInnerDiv);

  // Determine where to insert the quartoTitleMeta element
  if (headerHTML || headerRevealJS) {
    // Append to the existing "title-block-header" element or "title-slide" div
    (headerHTML || headerRevealJS).appendChild(quartoTitleMeta);
  } else {
    // If neither headerHTML nor headerRevealJS is found, insert after "webr-monaco-editor-init" script
    const monacoScript = document.getElementById("qwebr-monaco-editor-init");
    const header = document.createElement("header");
    header.setAttribute("id", "title-block-header");
    header.appendChild(quartoTitleMeta);
    monacoScript.after(header);
  }
}

displayStartupMessage(qwebrShowStartupMessage, qwebrShowHeaderMessage);
</script>
<script type="module">
// Supported Evaluation Types for Context
globalThis.EvalTypes = Object.freeze({
  Interactive: 'interactive',
  Setup: 'setup',
  Output: 'output',
});

// Function that dispatches the creation request
globalThis.qwebrCreateHTMLElement = function (
  cellData
) {

  // Extract key components
  const evalType = cellData.options.context;
  const qwebrCounter = cellData.id;

  // We make an assumption that insertion points are defined by the Lua filter as:
  // qwebr-insertion-location-{qwebrCounter} 
  const elementLocator = document.getElementById(`qwebr-insertion-location-${qwebrCounter}`);

  // Figure out the routine to use to insert the element.
  let qwebrElement;
  switch ( evalType ) {
    case EvalTypes.Interactive:
      qwebrElement = qwebrCreateInteractiveElement(qwebrCounter, cellData.options);
      break;
    case EvalTypes.Output: 
      qwebrElement = qwebrCreateNonInteractiveOutputElement(qwebrCounter, cellData.options);
      break;
    case EvalTypes.Setup: 
      qwebrElement = qwebrCreateNonInteractiveSetupElement(qwebrCounter, cellData.options);
      break;
    default: 
      qwebrElement = document.createElement('div');
      qwebrElement.textContent = 'Error creating `quarto-webr` element';
  }

  // Insert the dynamically generated object at the document location.
  elementLocator.appendChild(qwebrElement);
};

// Function that setups the interactive element creation
globalThis.qwebrCreateInteractiveElement = function (qwebrCounter, qwebrOptions) {

  // Create main div element
  var mainDiv = document.createElement('div');
  mainDiv.id = 'qwebr-interactive-area-' + qwebrCounter;
  mainDiv.className = `qwebr-interactive-area`;
  if (qwebrOptions.classes) {
    mainDiv.className += " " + qwebrOptions.classes
  }

  // Add a unique cell identifier that users can customize
  if (qwebrOptions.label) {
    mainDiv.setAttribute('data-id', qwebrOptions.label);
  }

  // Create toolbar div
  var toolbarDiv = document.createElement('div');
  toolbarDiv.className = 'qwebr-editor-toolbar';
  toolbarDiv.id = 'qwebr-editor-toolbar-' + qwebrCounter;

  // Create a div to hold the left buttons
  var leftButtonsDiv = document.createElement('div');
  leftButtonsDiv.className = 'qwebr-editor-toolbar-left-buttons';

  // Create a div to hold the right buttons
  var rightButtonsDiv = document.createElement('div');
  rightButtonsDiv.className = 'qwebr-editor-toolbar-right-buttons';

  // Create Run Code button
  var runCodeButton = document.createElement('button');
  runCodeButton.className = 'btn btn-default qwebr-button qwebr-button-run';
  runCodeButton.disabled = true;
  runCodeButton.type = 'button';
  runCodeButton.id = 'qwebr-button-run-' + qwebrCounter;
  runCodeButton.textContent = '🟡 Loading webR...';
  runCodeButton.title = `Run code (Shift + Enter)`;

  // Append buttons to the leftButtonsDiv
  leftButtonsDiv.appendChild(runCodeButton);

  // Create Reset button
  var resetButton = document.createElement('button');
  resetButton.className = 'btn btn-light btn-xs qwebr-button qwebr-button-reset';
  resetButton.type = 'button';
  resetButton.id = 'qwebr-button-reset-' + qwebrCounter;
  resetButton.title = 'Start over';
  resetButton.innerHTML = '<i class="fa-solid fa-arrows-rotate"></i>';

  // Create Copy button
  var copyButton = document.createElement('button');
  copyButton.className = 'btn btn-light btn-xs qwebr-button qwebr-button-copy';
  copyButton.type = 'button';
  copyButton.id = 'qwebr-button-copy-' + qwebrCounter;
  copyButton.title = 'Copy code';
  copyButton.innerHTML = '<i class="fa-regular fa-copy"></i>';

  // Append buttons to the rightButtonsDiv
  rightButtonsDiv.appendChild(resetButton);
  rightButtonsDiv.appendChild(copyButton);

  // Create console area div
  var consoleAreaDiv = document.createElement('div');
  consoleAreaDiv.id = 'qwebr-console-area-' + qwebrCounter;
  consoleAreaDiv.className = 'qwebr-console-area';

  // Create editor div
  var editorDiv = document.createElement('div');
  editorDiv.id = 'qwebr-editor-' + qwebrCounter;
  editorDiv.className = 'qwebr-editor';

  // Create output code area div
  var outputCodeAreaDiv = document.createElement('div');
  outputCodeAreaDiv.id = 'qwebr-output-code-area-' + qwebrCounter;
  outputCodeAreaDiv.className = 'qwebr-output-code-area';
  outputCodeAreaDiv.setAttribute('aria-live', 'assertive');

  // Create pre element inside output code area
  var preElement = document.createElement('pre');
  preElement.style.visibility = 'hidden';
  outputCodeAreaDiv.appendChild(preElement);

  // Create output graph area div
  var outputGraphAreaDiv = document.createElement('div');
  outputGraphAreaDiv.id = 'qwebr-output-graph-area-' + qwebrCounter;
  outputGraphAreaDiv.className = 'qwebr-output-graph-area';

  // Append buttons to the toolbar
  toolbarDiv.appendChild(leftButtonsDiv);
  toolbarDiv.appendChild(rightButtonsDiv);

  // Append all elements to the main div
  mainDiv.appendChild(toolbarDiv);
  consoleAreaDiv.appendChild(editorDiv);
  consoleAreaDiv.appendChild(outputCodeAreaDiv);
  mainDiv.appendChild(consoleAreaDiv);
  mainDiv.appendChild(outputGraphAreaDiv);

  return mainDiv;
}

// Function that adds output structure for non-interactive output
globalThis.qwebrCreateNonInteractiveOutputElement = function(qwebrCounter, qwebrOptions) {
  // Create main div element
  var mainDiv = document.createElement('div');
  mainDiv.id = 'qwebr-noninteractive-area-' + qwebrCounter;
  mainDiv.className = `qwebr-noninteractive-area`;
  if (qwebrOptions.classes) {
    mainDiv.className += " " + qwebrOptions.classes
  }
  
  // Add a unique cell identifier that users can customize
  if (qwebrOptions.label) {
    mainDiv.setAttribute('data-id', qwebrOptions.label);
  }
  
  // Create a status container div
  var statusContainer = createLoadingContainer(qwebrCounter);

  // Create output code area div
  var outputCodeAreaDiv = document.createElement('div');
  outputCodeAreaDiv.id = 'qwebr-output-code-area-' + qwebrCounter;
  outputCodeAreaDiv.className = 'qwebr-output-code-area';
  outputCodeAreaDiv.setAttribute('aria-live', 'assertive');

  // Create pre element inside output code area
  var preElement = document.createElement('pre');
  preElement.style.visibility = 'hidden';
  outputCodeAreaDiv.appendChild(preElement);

  // Create output graph area div
  var outputGraphAreaDiv = document.createElement('div');
  outputGraphAreaDiv.id = 'qwebr-output-graph-area-' + qwebrCounter;
  outputGraphAreaDiv.className = 'qwebr-output-graph-area';

  // Append all elements to the main div
  mainDiv.appendChild(statusContainer);
  mainDiv.appendChild(outputCodeAreaDiv);
  mainDiv.appendChild(outputGraphAreaDiv);

  return mainDiv;
};

// Function that adds a stub in the page to indicate a setup cell was used.
globalThis.qwebrCreateNonInteractiveSetupElement = function(qwebrCounter, qwebrOptions) {
  // Create main div element
  var mainDiv = document.createElement('div');
  mainDiv.id = `qwebr-noninteractive-setup-area-${qwebrCounter}`;
  mainDiv.className = `qwebr-noninteractive-setup-area`;
  if (qwebrOptions.classes) {
    mainDiv.className += " " + qwebrOptions.classes
  }


  // Add a unique cell identifier that users can customize
  if (qwebrOptions.label) {
    mainDiv.setAttribute('data-id', qwebrOptions.label);
  }

  // Create a status container div
  var statusContainer = createLoadingContainer(qwebrCounter);

  // Append status onto the main div
  mainDiv.appendChild(statusContainer);

  return mainDiv;
}


// Function to create loading container with specified ID
globalThis.createLoadingContainer = function(qwebrCounter) {

  // Create a status container
  const container = document.createElement('div');
  container.id = `qwebr-non-interactive-loading-container-${qwebrCounter}`;
  container.className = 'qwebr-non-interactive-loading-container qwebr-cell-needs-evaluation';

  // Create an R project logo to indicate its a code space
  const rProjectIcon = document.createElement('i');
  rProjectIcon.className = 'fa-brands fa-r-project fa-3x qwebr-r-project-logo';

  // Setup a loading icon from font awesome
  const spinnerIcon = document.createElement('i');
  spinnerIcon.className = 'fa-solid fa-spinner fa-spin fa-1x qwebr-icon-status-spinner';

  // Add a section for status text
  const statusText = document.createElement('p');
  statusText.id = `qwebr-status-text-${qwebrCounter}`;
  statusText.className = `qwebr-status-text qwebr-cell-needs-evaluation`;
  statusText.innerText = 'Loading webR...';

  // Incorporate an inner container
  const innerContainer = document.createElement('div');

  // Append elements to the inner container
  innerContainer.appendChild(spinnerIcon);
  innerContainer.appendChild(statusText);

  // Append elements to the main container
  container.appendChild(rProjectIcon);
  container.appendChild(innerContainer);

  return container;
}
</script>
<script type="module">
// Function to install a single package
async function qwebrInstallRPackage(packageName) {
  await mainWebR.evalRVoid(`webr::install('${packageName}');`);
}

// Function to load a single package
async function qwebrLoadRPackage(packageName) {
  await mainWebR.evalRVoid(`require('${packageName}', quietly = TRUE)`);
}

// Generic function to process R packages
async function qwebrProcessRPackagesWithStatus(packages, processType, displayStatusMessageUpdate = true) {
  // Switch between contexts
  const messagePrefix = processType === 'install' ? 'Installing' : 'Loading';

  // Modify button state
  qwebrSetInteractiveButtonState(`🟡 ${messagePrefix} package ...`, false);

  // Iterate over packages
  for (let i = 0; i < packages.length; i++) {
    const activePackage = packages[i];
    const formattedMessage = `${messagePrefix} package ${i + 1} out of ${packages.length}: ${activePackage}`;

    // Display the update in header
    if (displayStatusMessageUpdate) {
      qwebrUpdateStatusHeader(formattedMessage);
    }

    // Display the update in non-active areas
    qwebrUpdateStatusMessage(formattedMessage);

    // Run package installation
    if (processType === 'install') {
      await qwebrInstallRPackage(activePackage);
    } else {
      await qwebrLoadRPackage(activePackage);
    }
  }

  // Clean slate
  if (processType === 'load') {
    await mainWebR.flush();
  }
}

// Start a timer
const initializeWebRTimerStart = performance.now();

// Encase with a dynamic import statement
globalThis.qwebrInstance = import(qwebrCustomizedWebROptions.baseURL + "webr.mjs").then(
  async ({ WebR, ChannelType }) => {
    // Populate WebR options with defaults or new values based on `webr` meta
    globalThis.mainWebR = new WebR(qwebrCustomizedWebROptions);

    // Initialization WebR
    await mainWebR.init();

    // Setup a shelter
    globalThis.mainWebRCodeShelter = await new mainWebR.Shelter();

    // Setup a pager to allow processing help documentation 
    await mainWebR.evalRVoid('webr::pager_install()'); 

    // Override the existing install.packages() to use webr::install()
    await mainWebR.evalRVoid('webr::shim_install()'); 

    // Specify the repositories to pull from
    // Note: webR does not use the `repos` option, but instead uses `webr_pkg_repos`
    // inside of `install()`. However, other R functions still pull from `repos`.
    await mainWebR.evalRVoid(`
      options(
        webr_pkg_repos = c(${qwebrPackageRepoURLS.map(repoURL => `'${repoURL}'`).join(',')}),
        repos = c(${qwebrPackageRepoURLS.map(repoURL => `'${repoURL}'`).join(',')})
      )
    `);

    // Check to see if any packages need to be installed
    if (qwebrSetupRPackages) {
      // Obtain only a unique list of packages
      const uniqueRPackageList = Array.from(new Set(qwebrInstallRPackagesList));

      // Install R packages one at a time (either silently or with a status update)
      await qwebrProcessRPackagesWithStatus(uniqueRPackageList, 'install', qwebrShowStartupMessage);

      if (qwebrAutoloadRPackages) {
        // Load R packages one at a time (either silently or with a status update)
        await qwebrProcessRPackagesWithStatus(uniqueRPackageList, 'load', qwebrShowStartupMessage);
      }
    }
  }
);

// Stop timer
const initializeWebRTimerEnd = performance.now();

</script>
<script type="module">
// Function to verify a given JavaScript Object is empty
globalThis.qwebrIsObjectEmpty = function (arr) {
    return Object.keys(arr).length === 0;
}

// Global version of the Escape HTML function that converts HTML 
// characters to their HTML entities.
globalThis.qwebrEscapeHTMLCharacters = function(unsafe) {
    return unsafe
      .replace(/&/g, "&amp;")
      .replace(/</g, "&lt;")
      .replace(/>/g, "&gt;")
      .replace(/"/g, "&quot;")
      .replace(/'/g, "&#039;");
  };

// Passthrough results
globalThis.qwebrIdentity = function(x) {
    return x;
};

// Append a comment
globalThis.qwebrPrefixComment = function(x, comment) {
    return `${comment}${x}`;
};

// Function to parse the pager results
globalThis.qwebrParseTypePager = async function (msg) { 

    // Split out the event data
    const { path, title, deleteFile } = msg.data; 

    // Process the pager data by reading the information from disk
    const paged_data = await mainWebR.FS.readFile(path).then((data) => {
        // Obtain the file content
        let content = new TextDecoder().decode(data);

        // Remove excessive backspace characters until none remain
        while(content.match(/.[\b]/)){
        content = content.replace(/.[\b]/g, '');
        }

        // Returned cleaned data
        return content;
    });

    // Unlink file if needed
    if (deleteFile) { 
        await mainWebR.FS.unlink(path); 
    } 

    // Return extracted data with spaces
    return paged_data;
} 

// Function to run the code using webR and parse the output
globalThis.qwebrComputeEngine = async function(
    codeToRun, 
    elements, 
    options) {

    // Call into the R compute engine that persists within the document scope.
    // To be prepared for all scenarios, the following happens: 
    // 1. We setup a canvas device to write to by making a namespace call into the {webr} package
    // 2. We use values inside of the options array to set the figure size.
    // 3. We capture the output stream information (STDOUT and STERR)
    // 4. We disable the current device's image creation.
    // 5. Piece-wise parse the results into the different output areas

    // Create a pager variable for help/file contents
    let pager = [];

    // Handle how output is processed
    let showMarkup = options.results === "markup" && options.output !== "asis";
    let processOutput;

    if (showMarkup) {
        processOutput = qwebrEscapeHTMLCharacters;
    } else {
        processOutput = qwebrIdentity;
    }

    // ---- 
    // Convert from Inches to Pixels by using DPI (dots per inch)
    // for bitmap devices (dpi * inches = pixels)
    let fig_width = options["fig-width"] * options["dpi"]
    let fig_height = options["fig-height"] * options["dpi"]

    // Initialize webR
    await mainWebR.init();

    // Setup a webR canvas by making a namespace call into the {webr} package
    // Evaluate the R code
    // Remove the active canvas silently
    const result = await mainWebRCodeShelter.captureR(
        `webr::canvas(width=${fig_width}, height=${fig_height}, capture = TRUE)
        .webr_cvs_id <- dev.cur()
        ${codeToRun}
        invisible(dev.off(.webr_cvs_id))
        `, {
        withAutoprint: true,
        captureStreams: true,
        captureConditions: false//,
        // env: webR.objs.emptyEnv, // maintain a global environment for webR v0.2.0
    });

    // -----

    // Start attempting to parse the result data
    processResultOutput:try {
        
        // Avoid running through output processing
        if (options.results === "hide" || options.output === "false") { 
            break processResultOutput; 
        }

        // Merge output streams of STDOUT and STDErr (messages and errors are combined.)
        // Require both `warning` and `message` to be true to display `STDErr`. 
        const out = result.output
        .filter(
            evt => evt.type === "stdout" || 
            ( evt.type === "stderr" && (options.warning === "true" && options.message === "true")) 
        )
        .map((evt, index) => {
            const className = `qwebr-output-code-${evt.type}`;
            const outputResult = qwebrPrefixComment(processOutput(evt.data), options.comment);
            return `<code id="${className}-editor-${elements.id}-result-${index + 1}" class="${className}">${outputResult}</code>`;
        })
        .join("\n");


        // Clean the state
        // We're now able to process pager events.
        // As a result, we cannot maintain a true 1-to-1 output order 
        // without individually feeding each line
        const msgs = await mainWebR.flush();

        // Use `map` to process the filtered "pager" events asynchronously
        const pager = await Promise.all(
            msgs.filter(msg => msg.type === 'pager').map(
                async (msg) => {
                    return await qwebrParseTypePager(msg);
                }
            )
        );

        // Nullify the output area of content
        elements.outputCodeDiv.innerHTML = "";
        elements.outputGraphDiv.innerHTML = "";

        // Design an output object for messages
        const pre = document.createElement("pre");
        if (/\S/.test(out)) {
            // Display results as HTML elements to retain output styling
            const div = document.createElement("div");
            div.innerHTML = out;
            pre.appendChild(div);
        } else {
            // If nothing is present, hide the element.
            pre.style.visibility = "hidden";
        }

        elements.outputCodeDiv.appendChild(pre);

        // Determine if we have graphs to display
        if (result.images.length > 0) {
            // Create figure element
            const figureElement = document.createElement('figure');

            // Place each rendered graphic onto a canvas element
            result.images.forEach((img) => {
                // Construct canvas for object
                const canvas = document.createElement("canvas");

                // Set canvas size to image
                canvas.width = img.width;
                canvas.height = img.height;

                // Apply output truncations
                canvas.style.width = options["out-width"] ? options["out-width"] : `${fig_width}px`;
                if (options["out-height"]) {
                    canvas.style.height = options["out-height"];
                }

                // Apply styling
                canvas.style.display = "block";
                canvas.style.margin = "auto";

                // Draw image onto Canvas
                const ctx = canvas.getContext("2d");
                ctx.drawImage(img, 0, 0, img.width, img.height);
          
                // Append canvas to figure output area
                figureElement.appendChild(canvas);
            });

            if (options['fig-cap']) {
                // Create figcaption element
                const figcaptionElement = document.createElement('figcaption');
                figcaptionElement.innerText = options['fig-cap'];
                // Append figcaption to figure
                figureElement.appendChild(figcaptionElement);    
            }

            elements.outputGraphDiv.appendChild(figureElement);
        }

        // Display the pager data
        if (pager) {
        // Use the `pre` element to preserve whitespace.
        pager.forEach((paged_data, index) => {
            let pre_pager = document.createElement("pre");
            pre_pager.innerText = paged_data;
            pre_pager.classList.add("qwebr-output-code-pager");
            pre_pager.setAttribute("id", `qwebr-output-code-pager-editor-${elements.id}-result-${index + 1}`);
            elements.outputCodeDiv.appendChild(pre_pager);
        });
        }
    } finally {
        // Clean up the remaining code
        mainWebRCodeShelter.purge();
    }
}

// Function to execute the code (accepts code as an argument)
globalThis.qwebrExecuteCode = async function (
    codeToRun,
    id,
    options = {}) {

    // If options are not passed, we fall back on the bare minimum to handle the computation
    if (qwebrIsObjectEmpty(options)) {
        options = { 
            "context": "interactive", 
            "fig-width": 7, "fig-height": 5, 
            "out-width": "700px", "out-height": "", 
            "dpi": 72,
            "results": "markup", 
            "warning": "true", "message": "true",
        };
    }

    // Next, we access the compute areas values
    const elements = {
        runButton: document.getElementById(`qwebr-button-run-${id}`),
        outputCodeDiv: document.getElementById(`qwebr-output-code-area-${id}`),
        outputGraphDiv: document.getElementById(`qwebr-output-graph-area-${id}`),
        id: id,
    }

    // Disallowing execution of other code cells
    document.querySelectorAll(".qwebr-button-run").forEach((btn) => {
        btn.disabled = true;
    });

    if (options.context == EvalTypes.Interactive) {
        // Emphasize the active code cell
        elements.runButton.innerHTML = '<i class="fa-solid fa-spinner fa-spin qwebr-icon-status-spinner"></i> <span>Run Code</span>';
    }

    // Evaluate the code and parse the output into the document
    await qwebrComputeEngine(codeToRun, elements, options);

    // Switch to allowing execution of code
    document.querySelectorAll(".qwebr-button-run").forEach((btn) => {
        btn.disabled = false;
    });

    if (options.context == EvalTypes.Interactive) {
        // Revert to the initial code cell state
        elements.runButton.innerHTML = '<i class="fa-solid fa-play qwebr-icon-run-code"></i> <span>Run Code</span>';
    }
}

</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./L01-Data-frames.html">Handling data</a></li><li class="breadcrumb-item"><a href="./L02-Pointplots.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data graphics</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Lessons in Statistical Thinking</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/dtkaplan/Lessons-in-statistical-thinking/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text"> </span></span>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Handling data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L01-Data-frames.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Data frames</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L02-Pointplots.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data graphics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L03-Variation-and-distribution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Variation and density, graphically</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L04-Model-annotations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Annotating point plots with a model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L05-Wrangling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Data wrangling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L06-Computing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Computing with functions and arguments</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L07-Databases.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Databases</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Describing relationships</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L08-Statistical-thinking.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Statistical thinking &amp; variation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L09-Accounting-for-variation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Accounting for variation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L10-Model-patterns.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Model patterns</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L11-Regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Model functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L12-Adjustment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Adjustment</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Randomness and noise</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L13-Signal-and-noise.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Signal and noise</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L14-Simulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Simulation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L15-Noise-patterns.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Noise models</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L16-Estimation-and-likelihood.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Estimation and likelihood</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L17-R-squared.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">R-squared and covariates</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L18-Prediction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Predictions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L19-Sampling-variation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Sampling and sampling variation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L20-Confidence-intervals.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Confidence intervals</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L21-Measuring-and-accumulating-risk.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Measuring and accumulating risk</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Causal modeling</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L22-Effect-size.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Effect size</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L23-DAGs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Directed acyclic graphs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L24-Causality-and-DAGS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Causal influence and DAGs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L25-Confounding.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Confounding</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L26-Experiment.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Experiment and random assignment</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Hypothetical Thinking</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L27-Hypothetical-thinking.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Hypothetical thinking</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L28-Bayes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Competing hypotheses with Bayesian reasoning</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./L29-NHT.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Hypothesis testing</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Glossary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Glossary</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#point-plot" id="toc-point-plot" class="nav-link active" data-scroll-target="#point-plot">Point plot</a></li>
  <li><a href="#response-and-explanatory-variables" id="toc-response-and-explanatory-variables" class="nav-link" data-scroll-target="#response-and-explanatory-variables">Response and explanatory variables</a></li>
  <li><a href="#categorical-variables-and-jittering" id="toc-categorical-variables-and-jittering" class="nav-link" data-scroll-target="#categorical-variables-and-jittering">Categorical variables and jittering</a></li>
  <li><a href="#color-and-faceting" id="toc-color-and-faceting" class="nav-link" data-scroll-target="#color-and-faceting">Color and faceting</a></li>
  <li><a href="#graphical-annotations" id="toc-graphical-annotations" class="nav-link" data-scroll-target="#graphical-annotations">Graphical annotations</a></li>
  <li><a href="#exercises" id="toc-exercises" class="nav-link" data-scroll-target="#exercises">Exercises</a></li>
  <li><a href="#enrichment-topics" id="toc-enrichment-topics" class="nav-link" data-scroll-target="#enrichment-topics">Enrichment topics</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/dtkaplan/Lessons-in-statistical-thinking/blob/main/L02-Pointplots.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">
<script src="https://cdn.jsdelivr.net/npm/monaco-editor@0.47.0/min/vs/loader.js"></script>
<script type="module" id="qwebr-monaco-editor-init">

  // Configure the Monaco Editor's loader
  require.config({
    paths: {
      'vs': 'https://cdn.jsdelivr.net/npm/monaco-editor@0.47.0/min/vs'
    }
  });
</script>
<script type="module">
// Global dictionary to store Monaco Editor instances
globalThis.qwebrEditorInstances = {};

// Function that builds and registers a Monaco Editor instance    
globalThis.qwebrCreateMonacoEditorInstance = function (cellData) {

  const initialCode = cellData.code;
  const qwebrCounter = cellData.id;
  const qwebrOptions = cellData.options;

  // Retrieve the previously created document elements
  let runButton = document.getElementById(`qwebr-button-run-${qwebrCounter}`);
  let resetButton = document.getElementById(`qwebr-button-reset-${qwebrCounter}`);
  let copyButton = document.getElementById(`qwebr-button-copy-${qwebrCounter}`);
  let editorDiv = document.getElementById(`qwebr-editor-${qwebrCounter}`);
  
  // Load the Monaco Editor and create an instance
  let editor;
  require(['vs/editor/editor.main'], function () {
    editor = monaco.editor.create(editorDiv, {
      value: initialCode,
      language: 'r',
      theme: 'vs-light',
      automaticLayout: true,           // Works wonderfully with RevealJS
      scrollBeyondLastLine: false,
      minimap: {
        enabled: false
      },
      fontSize: '17.5pt',              // Bootstrap is 1 rem
      renderLineHighlight: "none",     // Disable current line highlighting
      hideCursorInOverviewRuler: true,  // Remove cursor indictor in right hand side scroll bar
      readOnly: qwebrOptions['read-only'] ?? false
    });

    // Store the official counter ID to be used in keyboard shortcuts
    editor.__qwebrCounter = qwebrCounter;

    // Store the official div container ID
    editor.__qwebrEditorId = `qwebr-editor-${qwebrCounter}`;

    // Store the initial code value and options
    editor.__qwebrinitialCode = initialCode;
    editor.__qwebrOptions = qwebrOptions;

    // Set at the model level the preferred end of line (EOL) character to LF.
    // This prevent `\r\n` from being given to the webR engine if the user is on Windows.
    // See details in: https://github.com/coatless/quarto-webr/issues/94
    // Associated error text: 
    // Error: <text>:1:7 unexpected input

    // Retrieve the underlying model
    const model = editor.getModel();
    // Set EOL for the model
    model.setEOL(monaco.editor.EndOfLineSequence.LF);

    // Dynamically modify the height of the editor window if new lines are added.
    let ignoreEvent = false;
    const updateHeight = () => {
      // Increment editor height by 2 to prevent vertical scroll bar from appearing
      const contentHeight = editor.getContentHeight() + 2;

      // Retrieve editor-max-height option
      const maxEditorHeight = qwebrOptions['editor-max-height'];

      // If editor-max-height is missing, allow infinite growth. Otherwise, threshold.
      const editorHeight = !maxEditorHeight ?  contentHeight : Math.min(contentHeight, maxEditorHeight);

      // We're avoiding a width change
      //editorDiv.style.width = `${width}px`;
      editorDiv.style.height = `${editorHeight}px`;
      try {
        ignoreEvent = true;

        // The key to resizing is this call
        editor.layout();
      } finally {
        ignoreEvent = false;
      }
    };

    // Helper function to check if selected text is empty
    function isEmptyCodeText(selectedCodeText) {
      return (selectedCodeText === null || selectedCodeText === undefined || selectedCodeText === "");
    }

    // Registry of keyboard shortcuts that should be re-added to each editor window
    // when focus changes.
    const addWebRKeyboardShortCutCommands = () => {
      // Add a keydown event listener for Shift+Enter to run all code in cell
      editor.addCommand(monaco.KeyMod.Shift | monaco.KeyCode.Enter, () => {

        // Retrieve all text inside the editor
        qwebrExecuteCode(editor.getValue(), editor.__qwebrCounter, editor.__qwebrOptions);
      });

      // Add a keydown event listener for CMD/Ctrl+Enter to run selected code
      editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.Enter, () => {

        // Get the selected text from the editor
        const selectedText = editor.getModel().getValueInRange(editor.getSelection());
        // Check if no code is selected
        if (isEmptyCodeText(selectedText)) {
          // Obtain the current cursor position
          let currentPosition = editor.getPosition();
          // Retrieve the current line content
          let currentLine = editor.getModel().getLineContent(currentPosition.lineNumber);

          // Propose a new position to move the cursor to
          let newPosition = new monaco.Position(currentPosition.lineNumber + 1, 1);

          // Check if the new position is beyond the last line of the editor
          if (newPosition.lineNumber > editor.getModel().getLineCount()) {
            // Add a new line at the end of the editor
            editor.executeEdits("addNewLine", [{
            range: new monaco.Range(newPosition.lineNumber, 1, newPosition.lineNumber, 1),
            text: "\n", 
            forceMoveMarkers: true,
            }]);
          }
          
          // Run the entire line of code.
          qwebrExecuteCode(currentLine, editor.__qwebrCounter, editor.__qwebrOptions);

          // Move cursor to new position
          editor.setPosition(newPosition);
        } else {
          // Code to run when Ctrl+Enter is pressed with selected code
          qwebrExecuteCode(selectedText, editor.__qwebrCounter, editor.__qwebrOptions);
        }
      });
    }

    // Register an on focus event handler for when a code cell is selected to update
    // what keyboard shortcut commands should work.
    // This is a workaround to fix a regression that happened with multiple
    // editor windows since Monaco 0.32.0 
    // https://github.com/microsoft/monaco-editor/issues/2947
    editor.onDidFocusEditorText(addWebRKeyboardShortCutCommands);

    // Register an on change event for when new code is added to the editor window
    editor.onDidContentSizeChange(updateHeight);

    // Manually re-update height to account for the content we inserted into the call
    updateHeight();

    // Store the editor instance in the global dictionary
    qwebrEditorInstances[editor.__qwebrCounter] = editor;

  });

  // Add a click event listener to the run button
  runButton.onclick = function () {
    qwebrExecuteCode(editor.getValue(), editor.__qwebrCounter, editor.__qwebrOptions);
  };

  // Add a click event listener to the reset button
  copyButton.onclick = function () {
    // Retrieve current code data
    const data = editor.getValue();
    
    // Write code data onto the clipboard.
    navigator.clipboard.writeText(data || "");
  };
  
  // Add a click event listener to the copy button
  resetButton.onclick = function () {
    editor.setValue(editor.__qwebrinitialCode);
  };
  
}
</script>

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./L01-Data-frames.html">Handling data</a></li><li class="breadcrumb-item"><a href="./L02-Pointplots.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data graphics</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-point-plots" class="quarto-section-identifier"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data graphics</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>The statistical thinker seeks to identify patterns in data, such as possible relationships between variables. But it is not easy to do this by direct examination of a data frame, such as <a href="#tbl-playfair-trade" class="quarto-xref">Table&nbsp;<span>2.1</span></a>.</p>
<div id="tbl-playfair-trade" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-playfair-trade-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2.1: Annual exports and imports in the trade between England and the East Indies between 1700 and 1800. (Choose “Show 100 entries” to show the entire dataframe at once.)
</figcaption>
<div aria-describedby="tbl-playfair-trade-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-5bae2878e851bae5a284" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-5bae2878e851bae5a284">{"x":{"filter":"none","vertical":false,"data":[[1700,1701,1702,1703,1704,1705,1706,1707,1708,1709,1710,1711,1712,1713,1714,1715,1716,1717,1718,1719,1720,1721,1722,1723,1724,1725,1726,1727,1728,1729,1730,1731,1732,1733,1734,1735,1736,1737,1738,1739,1740,1741,1742,1743,1744,1745,1746,1747,1748,1749,1750,1751,1752,1753,1754,1755,1756,1757,1758,1759,1760,1761,1762,1763,1764,1765,1766,1767,1768,1769,1770,1771,1772,1773,1774,1775,1776,1777,1778,1779,1780],[180,170,160,150,145,140,135,125,120,110,105,105,100,100,100,100,100,100,110,120,130,140,145,150,145,135,130,130,145,160,170,170,170,175,205,225,260,285,310,345,370,390,410,440,465,500,520,550,585,650,700,725,750,780,805,810,810,815,825,850,875,910,950,1010,1120,1330,1380,1395,1380,1350,1330,1285,1250,1190,1050,925,880,860,845,840,840],[460,480,490,500,510,525,550,565,580,590,625,650,680,710,725,755,795,825,860,880,900,925,940,955,960,965,970,975,980,980,975,980,980,982,985,987,985,982,980,980,980,978,975,975,978,980,980,960,960,955,940,910,880,850,835,830,830,850,890,945,1000,1100,1300,1400,1470,1500,1510,1515,1520,1525,1530,1530,1535,1535,1535,1535,1540,1545,1545,1550,1550]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Year<\/th>\n      <th>Exports<\/th>\n      <th>Imports<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[0,1,2]}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</figure>
</div>
<p>Translating a data frame into graphical form—data graphics—is essential for revealing or suggesting patterns. <a href="#fig-playfair" class="quarto-xref">Figure&nbsp;<span>2.1</span></a> gives a clear view of the trade pattern over the 100-year period at a glance.</p>
<div id="fig-playfair" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-playfair-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="www/playfair-aligned.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" data-glightbox="description: .lightbox-desc-1"><img src="www/playfair-aligned.png" class="img-fluid figure-img"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-playfair-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.1: William Playfair’s 1801 presentation of year-by-year data on trade between England and the East Indies. <a href="https://colenda.library.upenn.edu/catalog/81431-p3bv7bb8v">Source: University of Pennsylvania Libraries</a>
</figcaption>
</figure>
</div>
<p>Making pictures of data is a relatively modern idea. <a href="https://en.wikipedia.org/wiki/William_Playfair">William Playfair</a> (1759-1823) is credited as the inventor of novel graphical forms in which data values are presented graphically rather than as numbers or text. To illustrate, consider the data from the 1700s (<a href="#tbl-playfair-trade" class="quarto-xref">Table&nbsp;<span>2.1</span></a>) that Playfair turned into a picture.</p>
<p>Playfair’s innovation, as in <a href="#fig-playfair" class="quarto-xref">Figure&nbsp;<span>2.1</span></a>, was successful because it was powerful. A pattern that may be obscure in the data frame becomes visually apparent to the human viewer. For example, consider the graphic in <a href="#fig-playfair" class="quarto-xref">Figure&nbsp;<span>2.1</span></a> displaying data on trade between England and the East Indies in the 1700s. The graphic lets you look up the amount of trade each year, but it also shows patterns, such as the upward <em>trend</em> across the decades.</p>
<p>Data graphics can also make it easy to see deviations from trends, for instance, the dip in exports and flattening of imports during 1775-1780.</p>
<p>Students often encounter various types of data graphics as they progress through elementary and high school. <a href="#fig-textbook-graphs" class="quarto-xref">Figure&nbsp;<span>2.2</span></a> shows a few examples commonly found in textbooks. Remarkably, it’s rare to encounter such textbook graphic types outside of a statistics course.</p>
<div class="page-columns page-full">
<div id="fig-textbook-graphs" class="quarto-layout-panel page-columns page-full">
<figure class="quarto-float quarto-float-fig figure page-columns page-full">
<div aria-describedby="fig-textbook-graphs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca" class="page-columns page-full">
<div class="quarto-layout-row column-page-right">
<div class="quarto-layout-cell" style="flex-basis: 16.7%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="www/thumbnail-hist2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" data-glightbox="description: .lightbox-desc-2" title="Histogram"><img src="www/thumbnail-hist2.png" class="img-fluid figure-img"></a></p>
<figcaption>Histogram</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 16.7%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="www/thumbnail-dotplot.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" data-glightbox="description: .lightbox-desc-3" title="Dot plot"><img src="www/thumbnail-dotplot.png" class="img-fluid figure-img"></a></p>
<figcaption>Dot plot</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 16.7%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="www/thumbnail-barchart.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4" data-glightbox="description: .lightbox-desc-4" title="Bar chart"><img src="www/thumbnail-barchart.png" class="img-fluid figure-img"></a></p>
<figcaption>Bar chart</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 16.7%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="www/thumbnail-pie.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5" data-glightbox="description: .lightbox-desc-5" title="Pie chart"><img src="www/thumbnail-pie.png" class="img-fluid figure-img"></a></p>
<figcaption>Pie chart</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 16.7%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="www/thumbnail-boxplot.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6" data-glightbox="description: .lightbox-desc-6" title="Boxplot"><img src="www/thumbnail-boxplot.png" class="img-fluid figure-img"></a></p>
<figcaption>Boxplot</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 16.7%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="www/thumbnail-stem-and-leaf.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7" data-glightbox="description: .lightbox-desc-7" title="Stem-and-leaf plot"><img src="www/thumbnail-stem-and-leaf.png" class="img-fluid figure-img"></a></p>
<figcaption>Stem-and-leaf plot</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-textbook-graphs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.2: Some of the graphics styles often featured in statistics textbooks. <a name="many-plot-formats"><i class="bi bi-link-45deg"></i></a>
</figcaption>
</figure>
</div>
</div>
<!-- ![Playfair's pie chart](www/playfair-pie-chart.png)-->
<!-- ![Playfair's bar chart](www/playfair-barchart.png)-->
<p>Modern data graphic designers are introducing even more variety; their graphics can be captivating, colorful, dynamic, and informative. Some online examples: <a href="https://flowingdata.com/2015/12/15/a-day-in-the-life-of-americans" target="_blank">how people spend their day</a>, <a href="https://flowingdata.com/2017/01/24/one-dataset-visualized-25-ways" target="_blank">life expectancy</a>, <a href="http://hint.fm/wind/" target="_blank">wind patterns (right now!)</a>, <a href="https://archive.nytimes.com/www.nytimes.com/imagepages/2011/11/06/opinion/06atrocities_timeline.html?action=click&amp;contentCollection=Opinion&amp;module=RelatedCoverage%25C2%25AEion=EndOfArticle&amp;pgtype=article" target="_blank">historical sources of death</a>. The graphical types in <a href="#fig-textbook-graphs" class="quarto-xref">Figure&nbsp;<span>2.2</span></a> were all invented long before computers became available to help us work with data.</p>
<div class="page-columns page-full"><p>We won’t use such graphical variety in these <em>Lessons</em>.  Instead, we will use a single basic form of graphic—the “<strong>annotated point plot</strong>”—capable of displaying multiple variables simultaneously and which can combine into one view both the raw data and a summary of the patterns found in the data.</p><div class="no-row-height column-margin column-container"><span class="margin-aside"><a href="https://dtkaplan.github.io/Math300blog/Streamlining-graphics">Note to instructors</a></span></div></div>
<section id="point-plot" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="point-plot">Point plot</h2>
<div class="page-columns page-full"><p>A <strong>point plot</strong> contains a simple mark—a dot—for each row of a data frame. In its most common form, a point plot displays two selected variables from the data frame. One variable is depicted as the vertical coordinate, and the other as the horizontal coordinate. </p><div class="no-row-height column-margin column-container"><span class="margin-aside">A “point plot” is also known as a “scatter plot.”</span></div></div>
<p>To illustrate how a point plot relates to the underlying data frame, consider <a href="#tbl-world-cities" class="quarto-xref">Table&nbsp;<span>2.2</span></a>, where the unit of observation is a city. (The data frame is available in R as <code>maps::world.cities</code>.)</p>
<div id="tbl-world-cities" class="quarto-float anchored">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-world-cities-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2.2: Basic data on cities in the <code>maps::world.cities</code> data frame
</figcaption>
<div aria-describedby="tbl-world-cities-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell">
<div class="cell-output-display">
<div style="font-family: Monospace;">
<table class="lightable-minimal table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">name</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">country.etc</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">pop</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">lat</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">long</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">capital</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Shanghai</td>
<td style="text-align: left;">China</td>
<td style="text-align: right;">15017783</td>
<td style="text-align: right;">31.23</td>
<td style="text-align: right;">121.47</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="even">
<td style="text-align: left;">Bombay</td>
<td style="text-align: left;">India</td>
<td style="text-align: right;">12883645</td>
<td style="text-align: right;">18.96</td>
<td style="text-align: right;">72.82</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Karachi</td>
<td style="text-align: left;">Pakistan</td>
<td style="text-align: right;">11969284</td>
<td style="text-align: right;">24.86</td>
<td style="text-align: right;">67.01</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Buenos Aires</td>
<td style="text-align: left;">Argentina</td>
<td style="text-align: right;">11595183</td>
<td style="text-align: right;">-34.61</td>
<td style="text-align: right;">-58.37</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Delhi</td>
<td style="text-align: left;">India</td>
<td style="text-align: right;">11215130</td>
<td style="text-align: right;">28.67</td>
<td style="text-align: right;">77.21</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Manila</td>
<td style="text-align: left;">Philippines</td>
<td style="text-align: right;">10546511</td>
<td style="text-align: right;">14.62</td>
<td style="text-align: right;">120.97</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><em>… and so on for 10,000 cities</em></p>
</div>
</div></figure>
</div>
<p>Since <code>world.cities</code> contains several variables, many possible <em>pairs</em> of variables could be shown in point-plot form. For instance, suppose we choose the <code>lat</code> and <code>long</code> variables, which specify each city’s location in terms of latitude and longitude. <a href="#fig-world-cities" class="quarto-xref">Figure&nbsp;<span>2.3</span></a> shows a point plot of latitude <em>versus</em> longitude for world cities. By convention, the word “versus” in the phrase “latitude versus longitude” marks the role of each variable in the point plot: latitude on the vertical axis and longitude on the horizontal axis.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-world-cities" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-world-cities-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="L02-Pointplots_files/figure-html/fig-world-cities-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8" data-glightbox="description: .lightbox-desc-8"><img src="L02-Pointplots_files/figure-html/fig-world-cities-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-world-cities-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.3: A point plot of the latitude versus longitude of the world’s 250 largest population cities.
</figcaption>
</figure>
</div>
</div>
</div>
<p>The dots in <a href="#fig-world-cities" class="quarto-xref">Figure&nbsp;<span>2.3</span></a> hint at some geographical patterns you learned about in geography class. In general, the purpose of a point plot is to hint at patterns in data.</p>
<p>To show how to construct a point plot, we will work with data on human body shape. The <code>Anthro_F</code> data frame records nineteen different measurements of body shape for each of 184 college-aged women. (See <a href="#tbl-wrist-ankle2" class="quarto-xref">Table&nbsp;<span>2.3</span></a>)</p>
<div class="cell" data-and_so_son="... for 184 rows altogether">
<div id="tbl-wrist-ankle2" class="cell quarto-float anchored" data-and_so_son="... for 184 rows altogether">
<figure class="quarto-float quarto-float-tbl figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-tbl" id="tbl-wrist-ankle2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Table&nbsp;2.3: Some selected variables from the <code>Anthro_F</code> data frame.
</figcaption>
<div aria-describedby="tbl-wrist-ankle2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell-output-display">
<div style="font-family: Monospace;">
<table class="lightable-minimal do-not-create-environment cell table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">Wrist</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Ankle</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Knee</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Height</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Neck</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Biceps</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Waist</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">BFat</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">18.4</td>
<td style="text-align: right;">23.5</td>
<td style="text-align: right;">37.5</td>
<td style="text-align: right;">1.6637</td>
<td style="text-align: right;">34.0</td>
<td style="text-align: right;">32.0</td>
<td style="text-align: right;">84.3</td>
<td style="text-align: right;">27.30</td>
</tr>
<tr class="even">
<td style="text-align: right;">13.5</td>
<td style="text-align: right;">18.0</td>
<td style="text-align: right;">32.3</td>
<td style="text-align: right;">1.6002</td>
<td style="text-align: right;">27.1</td>
<td style="text-align: right;">23.2</td>
<td style="text-align: right;">60.2</td>
<td style="text-align: right;">17.62</td>
</tr>
<tr class="odd">
<td style="text-align: right;">18.0</td>
<td style="text-align: right;">22.5</td>
<td style="text-align: right;">38.5</td>
<td style="text-align: right;">1.6510</td>
<td style="text-align: right;">32.5</td>
<td style="text-align: right;">28.2</td>
<td style="text-align: right;">80.1</td>
<td style="text-align: right;">30.42</td>
</tr>
<tr class="even">
<td style="text-align: right;">19.0</td>
<td style="text-align: right;">24.5</td>
<td style="text-align: right;">41.5</td>
<td style="text-align: right;">1.6637</td>
<td style="text-align: right;">35.0</td>
<td style="text-align: right;">34.5</td>
<td style="text-align: right;">90.0</td>
<td style="text-align: right;">34.24</td>
</tr>
</tbody>
</table>
</div>
</div>
</div></figure>
</div>
</div>
<p>In making a point plot of <code>Anthro_F</code>, we have to choose <em>two</em> variables to display. One variable will determine the vertical position of the dots, the other variable will set the horizontal position. For instance, in <a href="L04-Model-annotations.html#fig-wrist-ankle" class="quarto-xref">Figure&nbsp;<span>4.1</span></a> we choose <code>Wrist</code> for the vertical position and <code>Ankle</code> for the horizontal position. In words, the plot is “wrist <em>versus</em> ankle,” that is, “vertical <em>versus</em> horizontal.” (The codebook for <code>Anthro_F</code>—available via the R command <code>?&nbsp;Anthro_F</code>—tells us that <code>Ankle</code> is measured as the circumference in centimeters, and similarly for <code>Wrist</code>.)</p>
<div id="fig-wrist-ankle" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-wrist-ankle-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div id="qwebr-insertion-location-1"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-wrist-ankle-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.4: A point plot of wrist versus ankle circumference. (Press “Run Code” to see the plot.)
</figcaption>
</figure>
</div>
<p>The pattern seen in <a href="L04-Model-annotations.html#fig-wrist-ankle" class="quarto-xref">Figure&nbsp;<span>4.1</span></a> can be described as an upward-sloping cloud. We will develop more formal descriptions of such clouds in later Lessons. But for now, focus on the R command that generated the point plot.</p>
<p>The point of an R command is to specify what action you want the computer to take. Here, the desired action is to make a point plot based on <code>Anthro_F</code> using the two variables <code>Wrist</code> and <code>Ankle</code>. Look carefully at the command for <a href="L04-Model-annotations.html#fig-wrist-ankle" class="quarto-xref">Figure&nbsp;<span>4.1</span></a>:</p>
<p><code>Anthro_F |&gt; point_plot(Wrist ~ Ankle)</code></p>
<p>The command includes all four of the names involved in the plot:</p>
<ul>
<li>The data frame <code>Anthro_F</code></li>
<li>The action <code>point_plot</code></li>
<li>The variables involved: <code>Wrist</code> and <code>Ankle</code></li>
</ul>
<p>These names are separated from one another by some punctuation marks:</p>
<ul>
<li><code>|&gt;</code>, the “pipe”</li>
<li><code>()</code>, a pair of parentheses</li>
<li><img src="www/tilde.png" class="img-fluid" alt="the tilde">, called “tilde”</li>
</ul>
<p>Don’t be daunted by this punctuation, strange though it may seem at first. You will get used to it, since almost all the commands you use in these <em>Lessons</em> will have the same punctuation.</p>
<p>Highlighting in color helps to identify the different components of the <a href="L04-Model-annotations.html#fig-wrist-ankle" class="quarto-xref">Figure&nbsp;<span>4.1</span></a> command:</p>
<p><a href="www/latex-image-point-plot.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="www/latex-image-point-plot.png" class="img-fluid"></a></p>
<!--
$\underbrace{\texttt{Anthro_F}}_\text{data frame}\  \   \color{orange}{\underbrace{\Large\texttt{|}\!\texttt{>}}_{\text{pipe}}} \ \ \    \color{green}{\underbrace{\texttt{app(}}_\texttt{function}}\ 
\color{blue}{\underbrace{\texttt{Wrist}\ _{\LARGE{\texttt{~}}}\  \texttt{Ankle}}_\text{argument}}\  \color{green}{\texttt{)}}$
-->
<div class="page-columns page-full"><p>Most commands in these <em>Lessons</em> start with a data frame named at the start of the command. This is followed by the pipe, which indicates sending the data frame to the next command component. That next component specifies which action to take. By convention, “<strong>Function</strong>” is used rather than “action.” You use differently named functions to carry out different kinds of actions. </p><div class="no-row-height column-margin column-container"><span class="margin-aside">You will need only a handful of function for these <em>Lessons</em>, for instance, <code>point_plot</code>, <code>model_train</code>, <code>conf_interval()</code>, <code>mutate()</code>, <code>summarize()</code>. This Lesson introduces <code>point_plot()</code>. The others will be introduced in later Lessons as we need them.</span></div></div>
<p>The function name is <em>always</em> followed by an opening parenthesis. Any details about what action to perform go between the opening and the corresponding closing parentheses. In computer terminology, such details are called “<strong>arguments</strong>.” The detail for the <a href="L04-Model-annotations.html#fig-wrist-ankle" class="quarto-xref">Figure&nbsp;<span>4.1</span></a> point_plot is the choice of the two variables to be used and which one goes on the vertical axis. This detail is written as a “<strong>tilde expression</strong>.” The tilde expression given as the argument to <code>point_plot()</code> is <code>Wrist ~ Ankle</code>, which can be pronounced as “wrist <em>versus</em> ankle” or `wrist&nbsp;<em>tilde</em>&nbsp;ankle,” as you prefer.</p>
<div id="lck-2.1" class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Learning check&nbsp;2.1
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Fill in the names of variables in the correct place to make a dot plot like <a href="L04-Model-annotations.html#fig-wrist-ankle" class="quarto-xref">Figure&nbsp;<span>4.1</span></a> but with <code>Waist</code> on the hortizontal axis and <code>Ankle</code> on the vertical axis.</p>
<div id="qwebr-insertion-location-2"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<button class="btn btn-light" data-bs-toggle="collapse" data-bs-target="#hintieFIaK">
Hints
</button>
<div id="hintieFIaK" class="collapse card card-body">
<ol type="1">
<li><p>As you substitute the variable names in the slots named <code>..vert..</code> and <code>..horiz..</code>, make sure not to erase the tilde character that separates the names. The tilde <img src="www/tilde.png" class="img-fluid"> is essential.</p></li>
<li><p>The variable named on the left-hand side of the tilde expression will be used for the vertical axis. The right-hand side variable will on the horizontal axis.</p></li>
<li><p>Take note that both names <code>Waist</code> and <code>Ankle</code> start with a capital letter.</p></li>
</ol>
</div>
</div>
</div>
</div>
<div id="lck-2.2" class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Learning check&nbsp;2.2
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Reproduce this plot, based on the <code>Galton</code> data frame.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="L02-Pointplots_files/figure-html/unnamed-chunk-6-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="L02-Pointplots_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<div id="qwebr-insertion-location-3"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<button class="btn btn-light" data-bs-toggle="collapse" data-bs-target="#hintieFIaK">
Hints
</button>
<div id="hintieFIaK" class="collapse card card-body">
<ol type="1">
<li><p>The labels on the axes tell which variables are being plotted.</p></li>
<li><p>Construct a tilde expression that relates the vertical variable to the horizontal variable.</p></li>
<li><p>Remember the tilde character between the variable names!</p></li>
</ol>
</div>
</div>
</div>
</div>
</section>
<section id="response-and-explanatory-variables" class="level2">
<h2 class="anchored" data-anchor-id="response-and-explanatory-variables">Response and explanatory variables</h2>
<p>Another pronunciation for <img src="www/tilde.png" class="img-fluid"> is “… as a function of ….” So, <code>Wrist&nbsp;~&nbsp;Ankle</code> means “wrist circumference as a function of ankle circumference.” In mathematics, functions are often written using a notation like <span class="math inline">\(f(x)\)</span>. In this notation, <span class="math inline">\(x\)</span> is the <strong>input</strong> to the function <code>f()</code>. The word “input” is used in so many different contexts that it’s helpful to use other technical words to highlight the context.</p>
<ul>
<li><p>In <strong>computer notation</strong>, such as <code>f(x)</code> or <code>point_plot(Wrist ~ Knee)</code>, an expression inside the parentheses is called an <strong>argument</strong>. In <code>f(x)</code>, the function is <code>f()</code> and the argument is <code>x</code>. In <code>point_plot(Wrist ~ Knee)</code>, the function is <code>point_plot()</code> and the argument is the tilde expression <code>Wrist ~ Knee</code>.</p></li>
<li><p>In <strong>statistics</strong>, in the word phrase “wrist circumference as a function of ankle circumference” or, equivalently, the computer expression <code>Wrist ~ Knee</code> referring to the <code>Anthro_F</code> data frame, we say that <code>Knee</code> is an <strong>explanatory variable</strong> and <code>Wrist</code> is the <strong>response variable</strong>. In graphics, such as <a href="L04-Model-annotations.html#fig-wrist-ankle" class="quarto-xref">Figure&nbsp;<span>4.1</span></a>, convention dictates that the response variable is shown along the vertical axis and the explanatory is shown along the horizontal axis.</p></li>
</ul>
<p>In <a href="L04-Model-annotations.html#fig-wrist-ankle" class="quarto-xref">Figure&nbsp;<span>4.1</span></a>, why did we choose <code>Ankle</code> as the explanatory variable and <code>Wrist</code> as the response variable for this example? No particular reason. We could equally well have chosen any of the <code>Anthro_F</code> variables in either role, depending on our interest. Typically, the statistical thinker will examine several different pairs to gain an understanding of how the various variables are related to one another.</p>
<div id="lck-2.3" class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Learning check&nbsp;2.3
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>We use the structure provided by tilde expressions to tell the computer which variable to use as the response and which ones to use as the explanatory variable(s).</p>
<p>Which of these tilde expressions puts <code>Height</code> in the role of the response variable and <code>Age</code> as the explanatory variable?</p>
<ol type="i">
<li><code>Age ~ Height</code></li>
<li><code>Height ~ Age</code></li>
</ol>
</div>
</div>
</div>
</section>
<section id="categorical-variables-and-jittering" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="categorical-variables-and-jittering">Categorical variables and jittering</h2>
<p>In the previous example, the point_plot of <code>Wrist</code> <em>versus</em> <code>Ankle</code>, both variables are <strong>quantitative</strong>: the respective joints’ circumference (in cm). point-plots are also suited to <strong>categorical</strong> variables. For example, <a href="#fig-mass-species" class="quarto-xref">Figure&nbsp;<span>2.5</span></a> shows a pair of point plots made from the <code>Penguins</code> data frame. The unit of observation is an individual penguin. The selected explanatory variable, <code>species</code>, is categorical. The response variable, <code>mass</code>, is quantitative.</p>
<div id="fig-mass-species" class="column-page-right quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mass-species-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>

</div>
<div class="cell quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="L02-Pointplots_files/figure-html/unnamed-chunk-7-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11" data-glightbox="description: .lightbox-desc-11" title="Without jittering"><img src="L02-Pointplots_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></a></p>
<figcaption>Without jittering</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="L02-Pointplots_files/figure-html/unnamed-chunk-7-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12" data-glightbox="description: .lightbox-desc-12" title="With jittering"><img src="L02-Pointplots_files/figure-html/unnamed-chunk-7-2.png" class="img-fluid figure-img" width="672"></a></p>
<figcaption>With jittering</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mass-species-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.5: The body mass of individuals of different species of penguins.
</figcaption>
</figure>
</div>
<p>When a categorical variable is used in a plot, the positions on the axis are labelled with the levels of the variable. “Adelie,” “Chinstrap,” and “Gentoo” in the explanatory variable of <a href="#fig-mass-species" class="quarto-xref">Figure&nbsp;<span>2.5</span></a>.</p>
<p>When an axis represents a <strong>quantitative</strong> variable, every possible position on that axis refers to a specific value. For instance, the Adelie penguins range between 2850 and 4775 grams. On the vertical axis itself, marks are made at 3000 and 4000 grams, but we know that every position in between those marks corresponds proportionately to a specific numerical value.</p>
<p>In contrast, when an axis represents a <strong>categorical</strong> variable, positions are marked for each level of that variable. But positions in between marks are not referring to fictitious “levels” that do not appear in the data. For instance, the position on the horizontal axis in <a href="#fig-mass-species" class="quarto-xref">Figure&nbsp;<span>2.5</span></a> that’s halfway between Adelie and Chinstrap is <em>not</em> reserved for individual penguins whose species is a mixture of Adelie and Chinstrap; every value of a categorical variables is one of the levels, which are discrete. There are no such penguins! (Or, at least, the concept of “species” doesn’t admit of such.)</p>
<p>Using a coordinate axis to represent discrete categories makes common sense, but we are left with the issue of interpreting the space between those categories. In <a href="#fig-mass-species" class="quarto-xref">Figure&nbsp;<span>2.5</span></a> (left) the point plot has been made ignoring the space between categories. Every specimen is lined up directly above the corresponding level. The graphical result is that it’s hard to identify a single specimen since the dots are plotted on top of one another..</p>
<p>“<strong>Jittering</strong>” is a simple graphical technique that uses the space between the levels to spread out the dots at random, as in <a href="#fig-mass-species" class="quarto-xref">Figure&nbsp;<span>2.5</span></a> (right). This dramatically reduces overlap and facilitates seeing the individual specimens. Recognize, however, that the precise jittered position of a specimen does not carry information about that specimen. All of the specimens in the column of jittered dots above “Adelie” are the same with respect to species, even though they may have different <code>mass</code>.</p>
<p>The <code>point_plot()</code> function automatically uses jittering when positioning in graphical space the values of categorical variables.</p>
<div id="lck-2.4" class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Learning check&nbsp;2.4
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Here is a place for you to construct some graphics in order to answer the following questions.</p>
<div id="qwebr-insertion-location-4"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<ol type="a">
<li>Which of the variables in <code>apgar5 ~ eclampsia</code> is being jittered?</li>
</ol>
<button class="btn btn-light" data-bs-toggle="collapse" data-bs-target="#hintieFIaK">
Answer
</button>
<div id="hintieFIaK" class="collapse card card-body">
<p><code>eclapsia</code> is a categorical variable so the data points are jittered horizontally. <code>apgar5</code> is numerical, so not jittered. Note that at each value of <code>apgar5</code> the points are arranged in a horizontal line; there is no vertical spread</p>
</div>
<ol start="2" type="a">
<li>Is jittering used when plotting <code>weight ~ meduc</code>?</li>
</ol>
<button class="btn btn-light" data-bs-toggle="collapse" data-bs-target="#hintcXshjv">
Answer
</button>
<div id="hintcXshjv" class="collapse card card-body">
<p><code>meduc</code> is a categorical variable and therefore jittered. Weight, a quantitative variable, is not jittered.</p>
</div>
<ol start="3" type="a">
<li>Which of the variables in <code>induction ~ fage</code> is being jittered?</li>
</ol>
<button class="btn btn-light" data-bs-toggle="collapse" data-bs-target="#hintSaoDP2">
Answer
</button>
<div id="hintSaoDP2" class="collapse card card-body">
<p><code>induction</code> is jittered. The data points are scattered vertically in a band around each of the categorical levels, “Y”, “N”, and NA.</p>
</div>
</div>
</div>
</div>
</section>
<section id="color-and-faceting" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="color-and-faceting">Color and faceting</h2>
<p>Often, there will be more than one explanatory variable of interest. A penguins mass might not just be a matter of species; there are bigger and smaller individuals within any species. Perhaps, for instance, the body <em>shape</em>—not just size—is different for the different species. One way to investigate this possibility is to display body <code>mass</code> as explained by <em>both</em> species and, say, <code>bill_length</code>.</p>
<p>To specify that there are two explanatory variables, place their both their names on the right-hand side of the tilde expression, separating the names with a <code>+</code> or a <code>*</code>. <a href="#fig-mass-bill-species" class="quarto-xref">Figure&nbsp;<span>2.6</span></a>(a) shows a point plot made with two explanatory variables.</p>
<div id="fig-mass-bill-species" class="column-page-right quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mass-bill-species-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>Penguins <span class="sc">|&gt;</span> <span class="fu">point_plot</span>(mass <span class="sc">~</span> bill_length <span class="sc">+</span> species)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>Penguins <span class="sc">|&gt;</span> <span class="fu">point_plot</span>(mass <span class="sc">~</span> bill_length <span class="sc">+</span> species <span class="sc">+</span> sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="L02-Pointplots_files/figure-html/unnamed-chunk-8-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13" data-glightbox="description: .lightbox-desc-13" title="two explanatory variables"><img src="L02-Pointplots_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></a></p>
<figcaption>two explanatory variables</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="L02-Pointplots_files/figure-html/unnamed-chunk-8-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14" data-glightbox="description: .lightbox-desc-14" title="three explanatory variables"><img src="L02-Pointplots_files/figure-html/unnamed-chunk-8-2.png" class="img-fluid figure-img" width="672"></a></p>
<figcaption>three explanatory variables</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mass-bill-species-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.6: Point plots involving multiple explanatory variables.
</figcaption>
</figure>
</div>
<p><a href="#fig-mass-bill-species" class="quarto-xref">Figure&nbsp;<span>2.6</span></a>(b) involves three variables. Consequently each dot has three different graphical attributes:</p>
<ul>
<li>position in space along the vertical axis. This is denoted as <strong>y</strong>.</li>
<li>position in space along the horizontal axis. This is denoted as <strong>x</strong>.</li>
<li>color, denoted, naturally enough, as <strong>color</strong>.</li>
</ul>
<p>In order to avoid long-winded sentences involving phrases like “the horizontal axis represents ….” we use the word <strong>mapped</strong><a href="Glossary.html#def-mapped-to" class="quarto-xref" target="popup" onclick="window.open('Glossary.html#def-mapped-to', 'popup', 'width=500, height=300'); return false;"><sup><i class="bi bi-card-text"></i></sup></a> . For instance, in <a href="#fig-mass-bill-species" class="quarto-xref">Figure&nbsp;<span>2.6</span></a>, <code>mass</code> is mapped to y, <code>bill_length</code> is mapped to x, and <code>species</code> is mapped to color. Each mapping has a <strong>scale</strong> that translates the graphical property to a numerical or, in the case of color, categorical value.</p>
<p><code>point_plot()</code> has been arranged so that the order of variable names in the tilde expression argument, <code>mass ~ bill_length + species</code>, exactly determines the mappings of variables to graphical properties. The response variable—that is, the variable named on the left-hand side of the tilde expression—is always mapped to y. The first variable on the right-hand side—<code>bill_length</code> in Figure <a href="#fig-mass-bill-species" class="quarto-xref"><span>2.6</span></a>—is always mapped to x. The second variable named on the right-hand side is always mapped to color.</p>
<p>In <a href="#fig-mass-bill-species" class="quarto-xref">Figure&nbsp;<span>2.6</span></a>(right), four variables are shown: the response <code>mass</code> as well as the three explanatory variables <code>bill_length</code>, <code>species</code>, and <code>sex</code>. Each variable needs to be mapped to a unique graphical property. <code>point_plot()</code> maps the third explanatory variable (if any) to a property called “<strong>facet</strong>.” Facets are drawn as separate sub-panels. The scale for the mapping to facet consists of the labels at the top of each facet.</p>
<p>With <code>point_plot()</code>, different but closely related graphs of the same data can be made by swapping the order of variables named in the tilde expression. To illustrate, <a href="#fig-mass-bill-species-sex2" class="quarto-xref">Figure&nbsp;<span>2.7</span></a> reverses the mappings <code>sex</code> and <code>species</code> compared to <a href="#fig-mass-bill-species" class="quarto-xref">Figure&nbsp;<span>2.6</span></a>(b). The data are the same in the two plots, but the different orderings of explanatory variables emphasize different aspects of the relationship among the variables. For instance, in <span class="quarto-unresolved-ref">?fig-mass-bill-species-sex</span>(b) it’s easier to see that the sexes of each species differ in both mass and bill length. Chinstrap males and females have bill lengths that are the most distinct from one another.</p>
<div id="fig-mass-bill-species-sex2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mass-bill-species-sex2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>Penguins <span class="sc">|&gt;</span> <span class="fu">point_plot</span>(mass <span class="sc">~</span> bill_length <span class="sc">+</span> sex <span class="sc">+</span> species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="L02-Pointplots_files/figure-html/unnamed-chunk-9-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-15" data-glightbox="description: .lightbox-desc-15"><img src="L02-Pointplots_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mass-bill-species-sex2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.7: The same data as in <a href="#fig-mass-bill-species" class="quarto-xref">Figure&nbsp;<span>2.6</span></a>(b), but with <code>sex</code> mapped to color and <code>species</code> mapped to facet. This changes the visual impression created.
</figcaption>
</figure>
</div>
<div id="lck-2.5" class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Learning check&nbsp;2.5
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>When there are multiple explanatory variables, the mappings to x, color, and facet strongly influence the interpretability of a point plot. In the following chunk, based on <a href="#fig-mass-bill-species-sex2" class="quarto-xref">Figure&nbsp;<span>2.7</span></a>, try several different arrangements of the explanatory variables. Pick the one you find most informative. (You need only to edit line three of the chunk. Leave the response variable as <code>mass</code>.)</p>
<div id="qwebr-insertion-location-5"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
</div>
</div>
</div>
</section>
<section id="graphical-annotations" class="level2">
<h2 class="anchored" data-anchor-id="graphical-annotations">Graphical annotations</h2>
<p>We can enhance our interpretion of patterns in the dots of a point plot by <em>adding “notes”</em> to the graphic, in other words, “<strong>annotating</strong>” the graphic. Lessons <a href="L03-Variation-and-distribution.html" class="quarto-xref"><span>3</span></a> and <a href="L04-Model-annotations.html" class="quarto-xref"><span>4</span></a> introduce different formats of statistical annotations that highlight different features of the data.</p>
<p>Here, to illustrate what we mean by a graphical annotation, we will use a familiar non-statistical annotation. <a href="#fig-cities-with-continents" class="quarto-xref">Figure&nbsp;<span>2.8</span></a> replots the locations of world cities with an annotation showing continents and islands.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-cities-with-continents" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cities-with-continents-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="L02-Pointplots_files/figure-html/fig-cities-with-continents-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-16" data-glightbox="description: .lightbox-desc-16"><img src="L02-Pointplots_files/figure-html/fig-cities-with-continents-1.png" class="img-fluid figure-img" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-cities-with-continents-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.8: The latitude and longitude of the world’s 250 biggest cities annotated with a map of the continents and major islands.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Data shown without an annotation (<a href="#fig-world-cities" class="quarto-xref">Figure&nbsp;<span>2.3</span></a>) may suggest a pattern. Adding an appropriate annotation enables you to judge the existence with the intuited pattern with much more confidence or, conversely, reject the pattern as a cloud-like illusion.</p>
</section>
<section id="exercises" class="level2">
<h2 class="anchored" data-anchor-id="exercises">Exercises</h2>
<div id="exr-02-100" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 2.1</strong></span> Make this plot:</p>
<div id="qwebr-insertion-location-6"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>Each dot reflects one row of the <code>Anthro_F</code> data frame and is placed at coordinate (<code>Ankle</code>, <code>Wrist</code>). Here are three rows selected from <code>Anthro_F</code>.</p>
<div class="cell">
<div class="cell-output-display">
<div style="font-family: Monospace;">
<table class="lightable-minimal table table-sm table-striped small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">Waist</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Height</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Wrist</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Knee</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Ankle</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">70.0</td>
<td style="text-align: right;">1.6256</td>
<td style="text-align: right;">16.0</td>
<td style="text-align: right;">37.0</td>
<td style="text-align: right;">20.0</td>
</tr>
<tr class="even">
<td style="text-align: right;">65.5</td>
<td style="text-align: right;">1.6002</td>
<td style="text-align: right;">14.5</td>
<td style="text-align: right;">34.2</td>
<td style="text-align: right;">20.2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">76.0</td>
<td style="text-align: right;">1.8034</td>
<td style="text-align: right;">17.5</td>
<td style="text-align: right;">38.2</td>
<td style="text-align: right;">25.0</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Locate (by eye) the three corresponding dots in the <a href="L04-Model-annotations.html#fig-wrist-ankle" class="quarto-xref">Figure&nbsp;<span>4.1</span></a> point plot.</p>
<p><a name="Q02-100"><i class="bi bi-card-text"></i>id=Q02-100</a></p>
</div>
<hr>
<div id="exr-02-101" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 2.2</strong></span> Here are two graphs of the <code>Anthro_F</code> data:</p>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>Anthro_F <span class="sc">|&gt;</span> <span class="fu">point_plot</span>(Forearm <span class="sc">~</span> Height)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>Anthro_F <span class="sc">|&gt;</span> <span class="fu">point_plot</span>(Wrist <span class="sc">~</span> Ankle)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-two-clouds-anthro" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-two-clouds-anthro-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-two-clouds-anthro" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-two-clouds-anthro-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-two-clouds-anthro-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="L02-Pointplots_files/figure-html/fig-two-clouds-anthro-1.png" class="lightbox" data-gallery="fig-two-clouds-anthro" data-glightbox="description: .lightbox-desc-17"><img src="L02-Pointplots_files/figure-html/fig-two-clouds-anthro-1.png" class="img-fluid figure-img" data-ref-parent="fig-two-clouds-anthro" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-two-clouds-anthro-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) <code>Forearm ~ Height</code>
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-two-clouds-anthro" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-two-clouds-anthro-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-two-clouds-anthro-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="L02-Pointplots_files/figure-html/fig-two-clouds-anthro-2.png" class="lightbox" data-gallery="fig-two-clouds-anthro" data-glightbox="description: .lightbox-desc-18"><img src="L02-Pointplots_files/figure-html/fig-two-clouds-anthro-2.png" class="img-fluid figure-img" data-ref-parent="fig-two-clouds-anthro" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-two-clouds-anthro-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) <code>Wrist ~ Ankle</code>
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-two-clouds-anthro-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.9: Two views of the <code>Anthro_F</code> data
</figcaption>
</figure>
</div>
<p>Each of the plots consists of a cloud of points. Considering just the <strong>shape</strong> and <strong>orientation</strong> of the clouds, describe how they differ from one another.</p>
<p><span style="color: grey; font-style: italic;"><em>Answer</em>: The <code>Wrist ~ Ankle</code> cloud slopes upward, while the <code>Forearm ~ Height</code> cloud shows no clear slope.</span></p>
<p><a name="Q02-101"><i class="bi bi-card-text"></i>id=Q02-101</a></p>
</div>
<hr>
<div id="exr-02-102" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 2.3</strong></span> Consider these two point plots, both constructed from 200 rows sampled from the <code>Whickham</code> data frame. (Note: It’s sensible to look up the codebook/documentation for the frame using the command <code>?Whickham</code>.)</p>
<div id="fig-Q02-102" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-Q02-102-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-Q02-102" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-Q02-102-1" class="quarto-figure quarto-figure-center quarto-float anchored" width="672">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-Q02-102-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="L02-Pointplots_files/figure-html/fig-Q02-102-1.png" class="lightbox" data-gallery="fig-Q02-102" data-glightbox="description: .lightbox-desc-19"><img src="L02-Pointplots_files/figure-html/fig-Q02-102-1.png" id="fig-Q02-102-1" class="img-fluid figure-img" data-ref-parent="fig-Q02-102" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-Q02-102-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a)
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-Q02-102" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-Q02-102-2" class="quarto-figure quarto-figure-center quarto-float anchored" width="672">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-Q02-102-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="L02-Pointplots_files/figure-html/fig-Q02-102-2.png" class="lightbox" data-gallery="fig-Q02-102" data-glightbox="description: .lightbox-desc-20"><img src="L02-Pointplots_files/figure-html/fig-Q02-102-2.png" id="fig-Q02-102-2" class="img-fluid figure-img" data-ref-parent="fig-Q02-102" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-Q02-102-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b)
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-Q02-102-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.10: Two views of the <code>Whickham</code> data. Click to enlarge.
</figcaption>
</figure>
</div>
<ol type="1">
<li><p>In Plot (a), there are four clumps of dots. What about the variables being mapped to x and y is responsible for creating the four clumps. <span style="color: grey; font-style: italic;"><em>Answer</em>: Both variables, <code>smoker</code> and <code>outcome</code> are categorical, therefore <code>point_plot()</code> uses <em>jittering</em> to display them. Each variable happens to have two levels, so there are four different combinations of the values of <code>smoker</code> and <code>outcome</code>. Hence, four clumps.</span></p></li>
<li><p>In Plot (a), the clump on the upper right includes the fewest specimens. What do all the specimens in that clump have in common? <span style="color: grey; font-style: italic;"><em>Answer</em>: All of them were smokers who had died by the time of the follow-survey.</span></p></li>
<li><p>In Plot (b), there are two <em>bands</em> of dots. What about the variables involved produces this pattern? <span style="color: grey; font-style: italic;"><em>Answer</em>: The <code>outcome</code> variable, mapped to y, is categorical, so jittering is used to place the dots. <code>outcome</code> has two levels, leading to the dots being broken up into two groups along y. But <code>age</code> is quantitative, and the specimens are broadly spread from ages 20 to 80. So the dots in each of the <code>outcome</code> groups gets spread out along x.</span></p></li>
<li><p>Plot (b) shows an association between <code>age</code> and and <code>outcome</code> that reflects a well known feature of human mortality. What is that feature? <span style="color: grey; font-style: italic;"><em>Answer</em>: <code>outcome</code> records whether the person, interviewed in the 1970s, had died by the time of a 20-year follow-up survey. As a rule, older people are more likely to die in the next 20 years.</span></p></li>
<li><p>Plot (a) does not hint at the association betweem <code>age</code> and <code>outcome</code> seen in Plot (b). Give the <em>simple</em> reason why. <span style="color: grey; font-style: italic;"><em>Answer</em>: Plot A does not display <code>age</code>.</span></p></li>
</ol>
<p><a name="Q02-102"><i class="bi bi-card-text"></i>id=Q02-102</a></p>
</div>
<hr>
<div id="exr-02-110" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 2.4</strong></span> &nbsp;</p>
<!--Q02-110-->
<p>Here is a point plot. We won’t tell you the name of the data frame.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="L02-Pointplots_files/figure-html/unnamed-chunk-13-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-21"><img src="L02-Pointplots_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>There’s no clear pattern to the dots, but that’s not the point of this exercise. Instead …</p>
<p>Write out on paper a few rows of an imagined data frame that could be the source of this graphic. You should get the variable names right, but the values you write for each numerical variable need merely be somewhere in the right range. For categorical variables, however, the levels should be exactly those shown in the graph.</p>
<p><a name="Q02-101"><i class="bi bi-card-text"></i>id=Q02-101</a></p>
</div>
<hr>
<div id="exr-02-098" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 2.5</strong></span> Reproduce each of the following graphs by construct an appropriate tilde expression. The data frame is named <code>Whickham</code>, and you are welcome to look at the documentation, but all the information you need to figure out the tilde expression is already in the graphs. (You can enlarge a graph by clicking on it.)</p>
<div id="fig-Q02-098" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-Q02-098-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>

</div>
<div class="cell quarto-layout-panel" data-layout-ncol="3">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="L02-Pointplots_files/figure-html/Q02-098-cXshjv-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-22" data-glightbox="description: .lightbox-desc-22" title="A"><img src="L02-Pointplots_files/figure-html/Q02-098-cXshjv-1.png" class="img-fluid figure-img" width="672"></a></p>
<figcaption>A</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="L02-Pointplots_files/figure-html/Q02-098-cXshjv-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-23" data-glightbox="description: .lightbox-desc-23" title="B"><img src="L02-Pointplots_files/figure-html/Q02-098-cXshjv-2.png" class="img-fluid figure-img" width="672"></a></p>
<figcaption>B</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="L02-Pointplots_files/figure-html/Q02-098-cXshjv-3.png" class="lightbox" data-gallery="quarto-lightbox-gallery-24" data-glightbox="description: .lightbox-desc-24" title="C"><img src="L02-Pointplots_files/figure-html/Q02-098-cXshjv-3.png" class="img-fluid figure-img" width="672"></a></p>
<figcaption>C</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<p>Three views of the <code>Whickham</code> data frame.</p>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-Q02-098-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.11
</figcaption>
</figure>
</div>
<div id="qwebr-insertion-location-7"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<ul>
<li>Graph A: <span style="color: grey; font-style: italic;"><em>Answer</em>: <code>outcome ~ smoker</code></span></li>
<li>Graph B: <span style="color: grey; font-style: italic;"><em>Answer</em>: <code>outcome ~ age</code></span></li>
<li>Graph C. <span style="color: grey; font-style: italic;"><em>Answer</em>: <code>age ~ smoker</code> </span></li>
</ul>
<p><a name="Q02-098"><i class="bi bi-card-text"></i>id=Q02-098</a></p>
</div>
<hr>
<div id="exr-02-103" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 2.6</strong></span> In each of the instances below, you are given the name of a data frame and a graph displaying the data frame. Your task is to construct the R command to duplicate the given graph.</p>
<div id="fig-cars-birds-wheat" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cars-birds-wheat-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-cars-birds-wheat" style="flex-basis: 33.3%;justify-content: flex-start;">
<div id="fig-cars-birds-wheat-1" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-cars-birds-wheat-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="L02-Pointplots_files/figure-html/fig-cars-birds-wheat-1.png" class="lightbox" data-gallery="fig-cars-birds-wheat" data-glightbox="description: .lightbox-desc-25"><img src="L02-Pointplots_files/figure-html/fig-cars-birds-wheat-1.png" class="img-fluid figure-img" data-ref-parent="fig-cars-birds-wheat" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-cars-birds-wheat-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Plot A:<code>FEV</code>
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-cars-birds-wheat" style="flex-basis: 33.3%;justify-content: flex-start;">
<div id="fig-cars-birds-wheat-2" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-cars-birds-wheat-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="L02-Pointplots_files/figure-html/fig-cars-birds-wheat-2.png" class="lightbox" data-gallery="fig-cars-birds-wheat" data-glightbox="description: .lightbox-desc-26"><img src="L02-Pointplots_files/figure-html/fig-cars-birds-wheat-2.png" class="img-fluid figure-img" data-ref-parent="fig-cars-birds-wheat" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-cars-birds-wheat-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Plot B:<code>Birdkeepers</code>
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-cars-birds-wheat" style="flex-basis: 33.3%;justify-content: flex-start;">
<div id="fig-cars-birds-wheat-3" class="quarto-figure quarto-figure-center quarto-float anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-cars-birds-wheat-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="L02-Pointplots_files/figure-html/fig-cars-birds-wheat-3.png" class="lightbox" data-gallery="fig-cars-birds-wheat" data-glightbox="description: .lightbox-desc-27"><img src="L02-Pointplots_files/figure-html/fig-cars-birds-wheat-3.png" class="img-fluid figure-img" data-ref-parent="fig-cars-birds-wheat" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-cars-birds-wheat-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(c) Plot C:<code>Wheat</code>
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-cars-birds-wheat-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.12: Plots from three different data frames
</figcaption>
</figure>
</div>
<div id="qwebr-insertion-location-8"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p><a name="Q02-103"><i class="bi bi-card-text"></i>id=Q02-103</a></p>
</div>
<hr>
<div id="exr-02-099" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 2.7</strong></span> Consider the following two point plots, both made from the same data frame. The unit of observation is an antique grandfather clock sold at auction.</p>
<div id="fig-two-clocks" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-two-clocks-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-two-clocks" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-two-clocks-1" class="quarto-figure quarto-figure-center quarto-float anchored" width="672">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-two-clocks-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="L02-Pointplots_files/figure-html/fig-two-clocks-1.png" class="lightbox" data-gallery="fig-two-clocks" data-glightbox="description: .lightbox-desc-28"><img src="L02-Pointplots_files/figure-html/fig-two-clocks-1.png" id="fig-two-clocks-1" class="img-fluid figure-img" data-ref-parent="fig-two-clocks" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-two-clocks-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a)
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-two-clocks" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-two-clocks-2" class="quarto-figure quarto-figure-center quarto-float anchored" width="672">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-two-clocks-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="L02-Pointplots_files/figure-html/fig-two-clocks-2.png" class="lightbox" data-gallery="fig-two-clocks" data-glightbox="description: .lightbox-desc-29"><img src="L02-Pointplots_files/figure-html/fig-two-clocks-2.png" id="fig-two-clocks-2" class="img-fluid figure-img" data-ref-parent="fig-two-clocks" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-two-clocks-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b)
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-two-clocks-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.13: Two views of the <code>Clock_auction</code> data frame
</figcaption>
</figure>
</div>
<ol type="1">
<li><p>How many rows are their in the data frame? <span style="color: grey; font-style: italic;"><em>Answer</em>: There is one dot for each row. Counting the dots gives 32.</span></p></li>
<li><p>Which variable is mapped to y? Which to x? <span style="color: grey; font-style: italic;"><em>Answer</em>: <code>price</code> is mapped to y, <code>age</code> to x.</span></p></li>
<li><p>Which is the response variable? <span style="color: grey; font-style: italic;"><em>Answer</em>: <code>price</code>. You can tell because the response variable is always mapped to y.</span></p></li>
<li><p>For each variable, say whether it is quantitative or categorical? <span style="color: grey; font-style: italic;"><em>Answer</em>: Both <code>age</code> and <code>price</code> are quantitative.</span></p></li>
<li><p>In Plot B, how many explanatory variables are there? What are their names? <span style="color: grey; font-style: italic;"><em>Answer</em>: The two explanatory variables are <code>age</code> and <code>bidders</code>.</span></p></li>
<li><p>Which variable is mapped to x? Which to color? <span style="color: grey; font-style: italic;"><em>Answer</em>: <code>bidders</code> is mapped to x, <code>age</code> to color.</span></p></li>
<li><p>From Plot A we could see that <code>age</code> is quantitative. (It’s the age of each of the clock.) But in Plot B, the color scale is divided into three categories? What are the names of the levels of the color categories? <span style="color: grey; font-style: italic;"><em>Answer</em>: The names are “[110-130]”, “[130-160]”, and “[160 to 190”]</span></p></li>
</ol>
<p>Note: The <code>point_plot()</code> function was written so that when a <strong>quantitative</strong> variable is mapped to color, the variable is displayed broken up into categories, each of which covers a range of numerical values, such as 110-130.</p>
<p><a name="Q02-099"><i class="bi bi-card-text"></i>id=Q02-099</a></p>
</div>
<hr>
<div id="exr-02-107" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 2.8</strong></span> &nbsp;</p>
<!-- Q02-107 -->
<p>The <code>Births2022</code> data frame records a random sample of 20,000 births in the US in 2022. Two of the variables, <code>meduc</code> and <code>feduc</code>, give the educational level of the mother and father respectively. The levels of these categorical variables correspond to “eighth grade or less”, “twelfth grade or less”, “high-school graduate,” “high-school graduate plus some college (but no degree),”associate’s degree,” “bachelor’s degree,” “master’s degree,” and “professional degree” (such as a PhD, EdD, MD, LLB, DDS, JD). Educational data is missing (“NA”) for about 5% of mothers and 15% of fathers.</p>
<p>The graph is a point plot of the mother’s education level versus the father’s.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="L02-Pointplots_files/figure-html/Q02-107OE4ul6-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-30"><img src="L02-Pointplots_files/figure-html/Q02-107OE4ul6-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<ol type="a">
<li>Is this a jittered point plot? Explain briefly how you can tell. <span style="color: grey; font-style: italic;"><em>Answer</em>: Yes, it’s jittered both horizontally and vertically. The axis tick marks correspond to discrete categorical levels, but the points themselves are spread out a little bit around the discrete levels. </span></li>
<li>Is transparency used? Explain briefly how you can tell. <span style="color: grey; font-style: italic;"><em>Answer</em>: Yes. In the blocks with a low number of points, each dot is not a solid color.</span></li>
<li>In principle, there are 9 <span class="math inline">\(\times\)</span> 9 = 81 possible combinations of the mother’s and father’s education. Which combination is the most common? What’s the second most common combination? <span style="color: grey; font-style: italic;"><em>Answer</em>: Most common: HS for both mother and father. Second most common: Bachelors for both mother and father. </span></li>
<li>Is it more common for a woman with a Bachelor’s degree to marry a man with a high-school degree or vice versa? <span style="color: grey; font-style: italic;"><em>Answer</em>: The square at mother=bachelors, father=HS is much darker than the similar square on the other side of the diagonal, that is, at father=bachelors, mother=HS</span></li>
<li>What would the graphic look like if jittering had not been used? <span style="color: grey; font-style: italic;"><em>Answer</em>: There would be a single dot at each of the populated intersections, rather than the square cloud of dots seen in the actual graph. </span></li>
</ol>
<p><a name="Q02-107"><i class="bi bi-card-text"></i>id=Q02-107</a></p>
</div>
<hr>
<div id="exr-02-104" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 2.9</strong></span> Here’s a <code>point_plot()</code> variable mapping that you would never see in practice, but which may help you better understand the use of color and facets.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="L02-Pointplots_files/figure-html/Q02-104CAWuCo-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-31"><img src="L02-Pointplots_files/figure-html/Q02-104CAWuCo-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<p>Explain why the graph consists of lines of dots in different locations and different colors in each of the panels. <span style="color: grey; font-style: italic;"><em>Answer</em>: The variable <code>mass</code> is being mapped to all four graphical properties: x, y, color, and facet. Since each dot has the same x and y coordinate, the dots all appear on the same diagonal line in each facet. Likewise, each facet corresponds to one color.</span></p>
<p><a name="Q02-104"><i class="bi bi-card-text"></i>id=Q02-104</a></p>
</div>
<hr>
<div id="exr-02-105" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 2.10</strong></span> &nbsp;</p>
<!-- Q02-105 -->
<p>Here are two point plots that differ only in the way the explanatory variables are mapped to graphical properties.</p>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>Galton <span class="sc">|&gt;</span> <span class="fu">point_plot</span>(height <span class="sc">~</span> mother <span class="sc">+</span> sex)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>Galton <span class="sc">|&gt;</span> <span class="fu">point_plot</span>(height <span class="sc">~</span> sex <span class="sc">+</span> mother)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-galton-two-ex" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-galton-two-ex-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-galton-two-ex" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-galton-two-ex-1" class="quarto-figure quarto-figure-center quarto-float anchored" width="672">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-galton-two-ex-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="L02-Pointplots_files/figure-html/fig-galton-two-ex-1.png" class="lightbox" data-gallery="fig-galton-two-ex" data-glightbox="description: .lightbox-desc-32"><img src="L02-Pointplots_files/figure-html/fig-galton-two-ex-1.png" id="fig-galton-two-ex-1" class="img-fluid figure-img" data-ref-parent="fig-galton-two-ex" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-galton-two-ex-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a)
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-galton-two-ex" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-galton-two-ex-2" class="quarto-figure quarto-figure-center quarto-float anchored" width="672">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-galton-two-ex-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="L02-Pointplots_files/figure-html/fig-galton-two-ex-2.png" class="lightbox" data-gallery="fig-galton-two-ex" data-glightbox="description: .lightbox-desc-33"><img src="L02-Pointplots_files/figure-html/fig-galton-two-ex-2.png" id="fig-galton-two-ex-2" class="img-fluid figure-img" data-ref-parent="fig-galton-two-ex" width="672"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-galton-two-ex-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b)
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-galton-two-ex-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2.14: Two views of the <code>height</code>, <code>mother</code>, and <code>sex</code> variables from the <code>Galton</code> data frame.
</figcaption>
</figure>
</div>
<ol type="a">
<li><p>In the plot that maps <code>mother</code> to x, explain how you would identify a child who is relatively short for their sex but who has a tall mother.</p></li>
<li><p>In the plot that maps <code>mother</code> to color, explain how you would identify a child who, as in (1), is relatively short for their sex but has a tall mother.</p></li>
</ol>
<p><a name="Q02-105"><i class="bi bi-card-text"></i>id=Q02-105</a></p>
</div>
<hr>
<div id="exr-02-106" class="theorem exercise">
<p><span class="theorem-title"><strong>Exercise 2.11</strong></span> &nbsp;</p>
<!-- Q02-106 -->
<p>The “body mass index” (BMI) is a familiar way of defining overweight. (Whether it is useful medically is controversial, but it is widely used.) BMI is an arithmetic combination of height and weight. Using the data in <code>Anthro_F</code>, make plots showing the relationship between <code>BMI</code>, <code>Height</code>, and <code>Weight</code>. There are <em>six</em> different ways of defining the graphics frame from three variables, e.g., <code>Height ~ BMI + Weight</code> or <code>Weight ~ Height + BMI</code>, and so on.</p>
<ol type="a">
<li><p>Make a list of the tilde expressions corresponding to the six different graphical frames using these variables.</p></li>
<li><p>Plot each one of the six possible graphical frames. From these choose one—whichever you like best—and use it to explain in graphical, everyday terms, how BMI is related to height and weight.</p></li>
</ol>
<div id="qwebr-insertion-location-9"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p><a name="Q02-106"><i class="bi bi-card-text"></i>id=Q02-106</a></p>
</div>
</div></section>
<section id="enrichment-topics" class="level2">
<h2 class="anchored" data-anchor-id="enrichment-topics">Enrichment topics</h2>
<div id="enr-axis-labels" class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Enrichment topic&nbsp;2.1: Proper labels for graphical scales
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>It’s very easy to use <code>point_plot()</code> to draw a graph, but the resulting graph often violates standards for good communication. For instance, make this graph:</p>
<div id="qwebr-insertion-location-10"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>The y-axis is labeled “price”, the x-axis “bidders,” and the color scale “age.”</p>
<p>It’s good practice to label axes so that the units of the quantity are shown clearly. Referring to the documentation for <code>Clock_auction</code>, the units of <code>price</code> are US dollars, the units of <code>age</code> are years, and <code>bidders</code> is a count of the number of people who put in bids for the particular clock. A good choice for the labels in the plot would be: y-axis: “Price (USD)” x-axis: “Number of bidders” color: “Clock age (yrs)”</p>
<p>The <code>add_plot_labels()</code> function allows you to enforce your own choices of labels. To see it in action, modify your code in the previous chunk to look like this:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>Clock_auction <span class="sc">|&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">point_plot</span>(price <span class="sc">~</span> bidders <span class="sc">+</span> age) <span class="sc">|&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_plot_labels</span>(<span class="at">y =</span> <span class="st">"Price (USD)"</span>, </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                  <span class="at">x =</span> <span class="st">"Number of bidders"</span>, </span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">color =</span> <span class="st">"Clock age (yrs)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The examples in these Lessons tend not to apply the accepted conventions for labels. Instead, we typically use simply the name of the variable. That makes it easier for you to figure out how any particular graph was made. And you can always look at the documentation to find out about units, etc. That might be appropriate in the context of these Lessons. But, more generally, when communicating with people, labels on scales ought to be more informative than just the variable name.</p>
</div>
</div>
</div>
<div id="enr-pointplot-extras" class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Enrichment topic&nbsp;2.2: More control over point plots
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Consider the relationship between the duration of pregnancy and the birth weight of the baby. Here’s a basic plot:</p>
<div id="qwebr-insertion-location-11"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>The cloud of points resembles a fish. The long tail corresponds to extremely to moderately pre-mature babies.</p>
<p>Notice that <code>duration</code> has not been jittered. That’s because it is a quantitative variable. But jittering would be appropriate because the vertical stripes are an artifact of round duration to the nearest week.</p>
<p>You can force <code>point_plot()</code> to jitter the variable mapped to x by adding this argument to the command: <code>jitter = "x"</code>. (Note the quotes around <code>"x"</code>.) Try it!</p>
<p>Even with jittering, there is a lot of overplotting. The effect is to make it difficult to see what <code>weight</code>/<code>duration</code> values are most common.</p>
<p>A good way to deal with the over-plotting is by making the dots transluscent. Do this by adding yet another argument, <code>point_ink = 0.1</code>. The number refers to the degree of translucency: 0 means completely transparent, 1 means completely opaque. There are so many data points that a <code>point_ink</code> value of 0.1 is actually quite large. Try making it smaller until you can easily see which value of duration is most common.</p>
<p>The “best” choice of transparency depends on what you are focusing on. To see the most common duration, a very low value of <code>point_ink</code> is called for. But such a low value would be counter-productive if the interest is in pre-mature babies.</p>
<p>Now consider the issue of twins. The <code>plurality</code> variable records such information.</p>
<div id="qwebr-insertion-location-12"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>Conventional wisdom is that wwins tend to be lower in birth weight than singletons. Twins also tend to be born somewhat earlier than singletons. Can we see this in the data?</p>
<p>Here’s a possible graphic:</p>
<div id="qwebr-insertion-location-13"></div>
<noscript>Please enable JavaScript to experience the dynamic code cell content on this page.</noscript>
<p>We had to increase <code>point_ink</code> to 0.5 in order to see the twins individually. But how do we know if the high-weight twins are hidden by the singletons, who are the vast majority.</p>
<p>Let’s try improving the plot by showing the different pluralities side by side. You can do this by modifying the tilde expression for <code>point_plot()</code> to <code>weight ~ duration + 1 + plurality</code>. This may look odd, but when you try it, you’ll see immediately why it makes sense.</p>
<p>With the twins drawn separately, you can afford to make <code>point_ink</code> smaller so that you can tell what are the most common values of weight and duration for each group. Do this until you can answer these questions:</p>
<ol type="1">
<li>Do twins tend to be lighter at birth and/or have shorter duration of pregancy?</li>
<li>Looking at, say, 37 weeks duration for both singletons and twins, are the twins birth weights still discernably lower? This sort of examination is usually described as “holding constant” a variable. “Holding constant” will be a major theme of these Lessons.</li>
</ol>
<p>We will return to the question of how best to display these data in <span class="quarto-unresolved-ref">?exr-06-900</span>. We will need some new tools.</p>
</div>
</div>
</div>


<div class="hidden" aria-hidden="true">
<span class="glightbox-desc lightbox-desc-1">Figure&nbsp;2.1: William Playfair’s 1801 presentation of year-by-year data on trade between England and the East Indies. <a href="https://colenda.library.upenn.edu/catalog/81431-p3bv7bb8v">Source: University of Pennsylvania Libraries</a></span>
<span class="glightbox-desc lightbox-desc-2">Histogram</span>
<span class="glightbox-desc lightbox-desc-3">Dot plot</span>
<span class="glightbox-desc lightbox-desc-4">Bar chart</span>
<span class="glightbox-desc lightbox-desc-5">Pie chart</span>
<span class="glightbox-desc lightbox-desc-6">Boxplot</span>
<span class="glightbox-desc lightbox-desc-7">Stem-and-leaf plot</span>
<span class="glightbox-desc lightbox-desc-8">Figure&nbsp;2.3: A point plot of the latitude versus longitude of the world’s 250 largest population cities.</span>
<span class="glightbox-desc lightbox-desc-11">Without jittering</span>
<span class="glightbox-desc lightbox-desc-12">With jittering</span>
<span class="glightbox-desc lightbox-desc-13">two explanatory variables</span>
<span class="glightbox-desc lightbox-desc-14">three explanatory variables</span>
<span class="glightbox-desc lightbox-desc-15">Figure&nbsp;2.7: The same data as in <a href="#fig-mass-bill-species" class="quarto-xref">Figure&nbsp;<span>2.6</span></a>(b), but with <code>sex</code> mapped to color and <code>species</code> mapped to facet. This changes the visual impression created.</span>
<span class="glightbox-desc lightbox-desc-16">Figure&nbsp;2.8: The latitude and longitude of the world’s 250 biggest cities annotated with a map of the continents and major islands.</span>
<span class="glightbox-desc lightbox-desc-17">Figure&nbsp;2.9&nbsp;(a): <code>Forearm ~ Height</code></span>
<span class="glightbox-desc lightbox-desc-18">Figure&nbsp;2.9&nbsp;(b): <code>Wrist ~ Ankle</code></span>
<span class="glightbox-desc lightbox-desc-19">Figure&nbsp;2.10&nbsp;(a): </span>
<span class="glightbox-desc lightbox-desc-20">Figure&nbsp;2.10&nbsp;(b): </span>
<span class="glightbox-desc lightbox-desc-22">A</span>
<span class="glightbox-desc lightbox-desc-23">B</span>
<span class="glightbox-desc lightbox-desc-24">C</span>
<span class="glightbox-desc lightbox-desc-25">Figure&nbsp;2.12&nbsp;(a): Plot A:<code>FEV</code></span>
<span class="glightbox-desc lightbox-desc-26">Figure&nbsp;2.12&nbsp;(b): Plot B:<code>Birdkeepers</code></span>
<span class="glightbox-desc lightbox-desc-27">Figure&nbsp;2.12&nbsp;(c): Plot C:<code>Wheat</code></span>
<span class="glightbox-desc lightbox-desc-28">Figure&nbsp;2.13&nbsp;(a): </span>
<span class="glightbox-desc lightbox-desc-29">Figure&nbsp;2.13&nbsp;(b): </span>
<span class="glightbox-desc lightbox-desc-32">Figure&nbsp;2.14&nbsp;(a): </span>
<span class="glightbox-desc lightbox-desc-33">Figure&nbsp;2.14&nbsp;(b): </span>
</div>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./L01-Data-frames.html" class="pagination-link  aria-label=" &lt;span="" frames&lt;="" span&gt;"="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Data frames</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./L03-Variation-and-distribution.html" class="pagination-link" aria-label="<span class='chapter-number'>3</span>&nbsp; <span class='chapter-title'>Variation and density, graphically</span>">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Variation and density, graphically</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/dtkaplan/Lessons-in-statistical-thinking/blob/main/L02-Pointplots.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></div></div></footer><script type="module">
// Handle cell initialization initialization
qwebrCellDetails.map(
  (entry) => {
    // Handle the creation of the element
    qwebrCreateHTMLElement(entry);
    // In the event of interactive, initialize the monaco editor
    if (entry.options.context == EvalTypes.Interactive) {
      qwebrCreateMonacoEditorInstance(entry);
    }
  }
);

// Identify non-interactive cells (in order)
const filteredEntries = qwebrCellDetails.filter(entry => {
  const contextOption = entry.options && entry.options.context;
  return ['output', 'setup'].includes(contextOption) || (contextOption == "interactive" && entry.options && entry.options.autorun === 'true');
});

// Condition non-interactive cells to only be run after webR finishes its initialization.
qwebrInstance.then(
  async () => {
    const nHiddenCells = filteredEntries.length;
    var currentHiddenCell = 0;


    // Modify button state
    qwebrSetInteractiveButtonState(`🟡 Running hidden code cells ...`, false);

    // Begin processing non-interactive sections
    // Due to the iteration policy, we must use a for() loop.
    // Otherwise, we would need to switch to using reduce with an empty
    // starting promise
    for (const entry of filteredEntries) {

      // Determine cell being examined
      currentHiddenCell = currentHiddenCell + 1;
      const formattedMessage = `Evaluating hidden cell ${currentHiddenCell} out of ${nHiddenCells}`;

      // Update the document status header
      if (qwebrShowStartupMessage) {
        qwebrUpdateStatusHeader(formattedMessage);
      }

      // Display the update in non-active areas
      qwebrUpdateStatusMessage(formattedMessage);

      // Extract details on the active cell
      const evalType = entry.options.context;
      const cellCode = entry.code;
      const qwebrCounter = entry.id;

      if (['output', 'setup'].includes(evalType)) {
        // Disable further global status updates
        const activeContainer = document.getElementById(`qwebr-non-interactive-loading-container-${qwebrCounter}`);
        activeContainer.classList.remove('qwebr-cell-needs-evaluation');
        activeContainer.classList.add('qwebr-cell-evaluated');

        // Update status on the code cell
        const activeStatus = document.getElementById(`qwebr-status-text-${qwebrCounter}`);
        activeStatus.innerText = " Evaluating hidden code cell...";
        activeStatus.classList.remove('qwebr-cell-needs-evaluation');
        activeStatus.classList.add('qwebr-cell-evaluated');
      }

      switch (evalType) {
        case 'interactive':
          // TODO: Make this more standardized.
          // At the moment, we're overriding the interactive status update by pretending its
          // output-like. 
          const tempOptions = entry.options;
          tempOptions["context"] = "output"
          // Run the code in a non-interactive state that is geared to displaying output
          await qwebrExecuteCode(`${cellCode}`, qwebrCounter, tempOptions);
          break;
        case 'output':
          // Run the code in a non-interactive state that is geared to displaying output
          await qwebrExecuteCode(`${cellCode}`, qwebrCounter, entry.options);
          break;
        case 'setup':
          const activeDiv = document.getElementById(`qwebr-noninteractive-setup-area-${qwebrCounter}`);
          // Run the code in a non-interactive state with all output thrown away
          await mainWebR.evalRVoid(`${cellCode}`);
          break;
        default: 
          break; 
      }

      if (['output', 'setup'].includes(evalType)) {
        // Disable further global status updates
        const activeContainer = document.getElementById(`qwebr-non-interactive-loading-container-${qwebrCounter}`);
        // Disable visibility
        activeContainer.style.visibility = 'hidden';
        activeContainer.style.display = 'none';
      }
    }
  }
).then(
  () => {
    // Release document status as ready

    if (qwebrShowStartupMessage) {
      qwebrStartupMessage.innerText = "🟢 Ready!"
    }
  
    qwebrSetInteractiveButtonState(
      `<i class="fa-solid fa-play qwebr-icon-run-code"></i> <span>Run Code</span>`, 
      true
    );  
  }
);
</script>
<script>var lightboxQuarto = GLightbox({"descPosition":"bottom","loop":false,"closeEffect":"zoom","selector":".lightbox","openEffect":"zoom"});
window.onload = () => {
  lightboxQuarto.on('slide_before_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    const href = trigger.getAttribute('href');
    if (href !== null) {
      const imgEl = window.document.querySelector(`a[href="${href}"] img`);
      if (imgEl !== null) {
        const srcAttr = imgEl.getAttribute("src");
        if (srcAttr && srcAttr.startsWith("data:")) {
          slideConfig.href = srcAttr;
        }
      }
    } 
  });

  lightboxQuarto.on('slide_after_load', (data) => {
    const { slideIndex, slideNode, slideConfig, player, trigger } = data;
    if (window.Quarto?.typesetMath) {
      window.Quarto.typesetMath(slideNode);
    }
  });

};
          </script>




</body></html>